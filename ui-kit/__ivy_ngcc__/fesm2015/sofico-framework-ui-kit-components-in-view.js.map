{"version":3,"file":"sofico-framework-ui-kit-components-in-view.js","sources":["../../../../projects/sofico-framework/ui-kit/components/in-view/in-view.component.ts","../../../../projects/sofico-framework/ui-kit/components/in-view/in-view.module.ts","../../../../projects/sofico-framework/ui-kit/components/in-view/sofico-framework-ui-kit-components-in-view.ts"],"names":[],"mappings":";;;;;;;MAuBa,eAAe;AAAG,IAX/B;AACG,QAWQ,kBAAa,GAAQ,IAAI,CAAC;AACrC,QAAW,kBAAa,GAAG,CAAC,CAAC;AAC7B,QACY,WAAM,GAAG,IAAI,YAAY,EAAW,CAAC;AACjD,KAwBC;AACD,IAnBE,QAAQ;AAAK;AACgC,QAC3C,MAAM,EAAE,GAAG,CAAC,OAAoC;AAClD;AACA,YADI,OAAA,IAAI,CAAC,MAAM,CAAC,IAAI,aACd,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,0CAAG,CAAC,2CAAG,cAAc,CACxE,CAAA;AAAC,SAAD,CAAC;AACR,QACI,IAAI,CAAC,oBAAoB,GAAG,IAAI,oBAAoB,CAAC,EAAE,EAAE;AAC7D,YAAM,IAAI,EAAE,IAAI,CAAC,aAAa;AAC9B,YAAM,UAAU,EAAE,WAAW,IAAI,CAAC,aAAa,QAAQ;AACvD,SAAK,CAAC,CAAC;AACP,QACI,IAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;AACpE,KAAG;AACH,IACE,WAAW;AAAK,QACd,IAAI,CAAC,oBAAoB,CAAC,UAAU,EAAE,CAAC;AAC3C,KAAG;AACH;2CAxCC,SAAS,SAAC,kBACT,QAAQ,EAAE;CAAa,kBACvB,eAAe,EAAE,uBAAuB,CAAC,MAAM,kBAC/C,QAAQ,EAAE;0BAKT;;;;2CAEF;;;;;;oVACI;AAAC;AAAmC,4BACtC,KAAK;AAAK,4BACV,KAAK;AAAK,qBAEV,MAAM;AAAK,wBAEX,SAAS,SAAC,WAAW,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,MAAM,EAAE,IAAI,EAAE;AACxD;;;;;;;;;;;;;;;;;;;;;;;oBAAE;AAAC;AAAC,MCrBK,YAAY;AAAG;wCAL3B,QAAQ,SAAC,kBACR,YAAY,EAAE,CAAC;aAAe,CAAC,kBAC/B,OAAO,EAAE,CAAC,eAAe,CAAC;OAC1B,OAAO,EAAE,CAAC,YAAY,CAAC,cACxB;;;;;;;;;0BACI;AAAC;ACTN;AACA;AACA;AACA;AACA;AACY","sourcesContent":["import {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  ViewChild\n} from '@angular/core';\n\n@Component({\n  selector: 'sof-in-view',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <ng-content></ng-content>\n    <div class=\"in-slice\">\n      <div #targetRef></div>\n    </div>\n  `,\n  styleUrls: ['./in-view.component.scss']\n})\nexport class InViewComponent implements OnInit, OnDestroy {\n  @Input() scrollableRef: any = null;\n  @Input() preloadHeight = 0;\n\n  @Output() inView = new EventEmitter<boolean>();\n\n  @ViewChild('targetRef', { read: ElementRef, static: true })\n  targetRef: ElementRef;\n\n  private intersectionObserver: IntersectionObserver;\n\n  ngOnInit(): void {\n    // We should only emit the most recent event\n    const fn = (entries: IntersectionObserverEntry[]) =>\n      this.inView.emit(\n        entries.sort((a, b) => (a.time > b.time ? -1 : 1))?.[0]?.isIntersecting\n      );\n\n    this.intersectionObserver = new IntersectionObserver(fn, {\n      root: this.scrollableRef,\n      rootMargin: `0px 0px ${this.preloadHeight}px 0px`\n    });\n\n    this.intersectionObserver.observe(this.targetRef.nativeElement);\n  }\n\n  ngOnDestroy(): void {\n    this.intersectionObserver.disconnect();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { InViewComponent } from './in-view.component';\n\n@NgModule({\n  declarations: [InViewComponent],\n  exports: [InViewComponent],\n  imports: [CommonModule]\n})\nexport class InViewModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]}