{"version":3,"file":"sofico-framework-ui-kit-components-input-currency.js","sources":["../../../../projects/sofico-framework/ui-kit/components/input-currency/input-currency.component.ts","../../../../projects/sofico-framework/ui-kit/components/input-currency/input-currency.module.ts","../../../../projects/sofico-framework/ui-kit/components/input-currency/sofico-framework-ui-kit-components-input-currency.ts"],"names":[],"mappings":";;;;;;;;;;;;MAwCa,sBACX,SAAQ,wBAAwB;AAChC,IAGA,YACqB,IAAmB,EACX,SAAoB;AAChD,QACC,KAAK,EAAE,CAAC;AACZ,QAJuB,SAAI,GAAJ,IAAI,CAAe;AAAC,QACZ,cAAS,GAAT,SAAS,CAAW;AACnD,QAEI,IAAI,SAAS,EAAE;AACnB,YAAM,SAAS,CAAC,aAAa,GAAG,IAAI,CAAC;AACrC,SAAK;AACL,KAAG;AACH,IACE,QAAQ;AAAK,QACX,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;AAC5C,KAAG;AACH,IACE,WAAW;AAAK;AACR,QAAN,UAAI,IAAI,CAAC,SAAS,0CAAE,aAAa,EAAE;AACvC;AACM;AACM;AACM;AACM;AACM,YAAxB,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,UAAU,GAAG,SAAQ,CAAC;AACzD,SAAK;AACL,KAAG;AACH;kDA5DC,SAAS,SAAC,kBACT,QAAQ,EAAE,oBAAoB,kBAC9B,QAAQ,EAAE;;;+SAwBT,kBACD,SAAS,EAAE,sBACT,EAAE,OAAO;AAAE,mBAAmB,EAAE,WAAW,EAAE;YAAsB,EAAE,kBACtE;EACF;;;;;;;;;;;;;;;;iEACI;AAAC;AACY,YAvCT,aAAa,uBA4CjB,QAAQ;AAAO,YA7CX,SAAS,uBA8Cb,QAAQ,YAAI,IAAI;AAAM;AAAG;AAG7B,2BAPE,KAAK;AAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oBAAE;AAAC;AAAC,MCjCH,mBAAmB;AAAG;+CALlC,QAAQ,SAAC,kBACR,OAAO,EAAE,CAAC,YAAY,EAAE;SAAgB,CAAC,kBACzC,YAAY,EAAE,CAAC,sBAAsB,CAAC;CACtC,OAAO,EAAE,CAAC,sBAAsB,CAAC,cAClC;;;;;;;;;0BACI;AAAC;ACVN;AACA;AACA;AACA;AACA;AAC0B","sourcesContent":["import { Component, Host, Input, OnDestroy, Optional } from '@angular/core';\nimport { NgControl } from '@angular/forms';\nimport { FormComponent } from '@sofico-framework/ui-kit/components/form';\nimport { InputNumberBaseDirective } from '@sofico-framework/ui-kit/components/number-base';\nimport {\n  OnSofFocus,\n  SOF_FOCUS_COMPONENT\n} from '@sofico-framework/ui-kit/directives/focus';\n\n@Component({\n  selector: 'sof-input-currency',\n  template: `\n    <div class=\"input-group\">\n      <div class=\"input-group-prepend\">\n        <span class=\"input-group-text\">{{\n          currencyCode | sofCurrencySymbol\n        }}</span>\n      </div>\n      <input\n        #inputElement\n        type=\"text\"\n        inputmode=\"decimal\"\n        [attr.id]=\"labelForId\"\n        [value]=\"internalValue\"\n        class=\"form-control\"\n        [class.is-invalid]=\"\n          invalid ||\n          (ngControl?.invalid && (ngControl?.touched || form?.submitted))\n        \"\n        [placeholder]=\"placeholder\"\n        [disabled]=\"isDisabled\"\n        (input)=\"onChange($event.target?.value)\"\n        (blur)=\"onTouch()\"\n      />\n    </div>\n  `,\n  providers: [\n    { provide: SOF_FOCUS_COMPONENT, useExisting: InputCurrencyComponent }\n  ]\n})\nexport class InputCurrencyComponent\n  extends InputNumberBaseDirective\n  implements OnDestroy, OnSofFocus {\n  @Input() currencyCode: string;\n\n  constructor(\n    @Optional() public form: FormComponent,\n    @Optional() @Host() public ngControl: NgControl\n  ) {\n    super();\n    if (ngControl) {\n      ngControl.valueAccessor = this;\n    }\n  }\n\n  sofFocus(): void {\n    this.inputElement.nativeElement.focus();\n  }\n\n  ngOnDestroy(): void {\n    if (this.ngControl?.valueAccessor) {\n      // Every time a control is re-created the previous writeValue reference(s) is not cleaned up.\n      // So, over time, a lot of these references can be built up. This memory leak is a bug in Angular's implementation of ControlValueAccessor.\n      // We hide that problem by assigning an empty function to writeValue every time we destroy the control.\n      // An detailed explanation of the problem can be found here: https://github.com/angular/angular/pull/29335\n      // The bug issue for it: https://github.com/angular/angular/issues/20007\n      this.ngControl.valueAccessor.writeValue = () => {};\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { UtilsPipesModule } from '@sofico-framework/utils';\nimport { InputCurrencyComponent } from './input-currency.component';\n\n@NgModule({\n  imports: [CommonModule, UtilsPipesModule],\n  declarations: [InputCurrencyComponent],\n  exports: [InputCurrencyComponent]\n})\nexport class InputCurrencyModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]}