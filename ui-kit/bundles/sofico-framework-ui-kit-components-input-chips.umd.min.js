!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@sofico-framework/ui-kit/components/form"),require("@sofico-framework/ui-kit/directives/focus"),require("@sofico-framework/utils"),require("@angular/common"),require("@sofico-framework/ui-kit/components/editable-chip"),require("@sofico-framework/ui-kit/components/svg-icon"),require("ng-zorro-antd/tag")):"function"==typeof define&&define.amd?define("@sofico-framework/ui-kit/components/input-chips",["exports","@angular/core","@angular/forms","@sofico-framework/ui-kit/components/form","@sofico-framework/ui-kit/directives/focus","@sofico-framework/utils","@angular/common","@sofico-framework/ui-kit/components/editable-chip","@sofico-framework/ui-kit/components/svg-icon","ng-zorro-antd/tag"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self)["sofico-framework"]=e["sofico-framework"]||{},e["sofico-framework"]["ui-kit"]=e["sofico-framework"]["ui-kit"]||{},e["sofico-framework"]["ui-kit"].components=e["sofico-framework"]["ui-kit"].components||{},e["sofico-framework"]["ui-kit"].components["input-chips"]={}),e.ng.core,e.ng.forms,e["sofico-framework"]["ui-kit"].components.form,e["sofico-framework"]["ui-kit"].directives.focus,e.utils,e.ng.common,e["sofico-framework"]["ui-kit"].components["editable-chip"],e["sofico-framework"]["ui-kit"].components["svg-icon"],e.tag)}(this,(function(e,t,i,n,o,r,a,l,s,u){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */Object.create;function p(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,o,r=i.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return a}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}Object.create;function h(e){return function(t){var i;return r.isNullOrUndefined(e)||r.isNullOrUndefined(null==t?void 0:t.value)||!Array.isArray(t.value)?null:(null===(i=t.value)||void 0===i?void 0:i.some((function(t){return!t.match(e)})))?{invalidChips:!0}:null}}var d=function(){function e(e,i){this.form=e,this.ngControl=i,this.placeholder="",this.changeValue=new t.EventEmitter,this.touch=new t.EventEmitter,this.internalChipValue=null,i&&(i.valueAccessor=this)}return Object.defineProperty(e.prototype,"validationRegex",{set:function(e){var t,i,n;r.isNullOrUndefined(e)||(this.internalValidationRegex=e,this.ngControl&&(this.internalValidators?null===(t=this.ngControl.control)||void 0===t||t.setValidators(c([h(this.internalValidationRegex)],this.internalValidators)):null===(i=this.ngControl.control)||void 0===i||i.setValidators(h(this.internalValidationRegex)),null===(n=this.ngControl.control)||void 0===n||n.updateValueAndValidity()))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"validators",{set:function(e){var t,i,n;r.isNullOrUndefined(e)||(this.internalValidators=Array.isArray(e)?e:[e],this.ngControl&&(this.internalValidationRegex?null===(t=this.ngControl.control)||void 0===t||t.setValidators(c([h(this.internalValidationRegex)],this.internalValidators)):null===(i=this.ngControl.control)||void 0===i||i.setValidators(this.internalValidators),null===(n=this.ngControl.control)||void 0===n||n.updateValueAndValidity()))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){this.writeValue(e)},enumerable:!1,configurable:!0}),e.prototype.sofFocus=function(){this.chipInput.nativeElement.focus()},e.prototype.ngOnDestroy=function(){var e;(null===(e=this.ngControl)||void 0===e?void 0:e.valueAccessor)&&(this.ngControl.valueAccessor.writeValue=function(){})},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){this.propagateTouch=e},e.prototype.writeValue=function(e){this.internalValue=null!=e?e:[]},e.prototype.onChange=function(e){if(!this.isDisabled){var t=null!=e?e:[];this.propagateChange&&(this.internalValue=t,this.propagateChange(t)),this.changeValue.emit(t)}},e.prototype.submitChip=function(e){var t;this.propagateTouch&&this.propagateTouch(),this.internalChipValue&&(null==e||e.preventDefault());var i=null===(t=this.internalChipValue)||void 0===t?void 0:t.trim();if(i)if(!r.isNullOrUndefined(this.separator)&&i.indexOf(this.separator)>=0){var n=i.split(this.separator).filter(Boolean).map((function(e){return e.trim()}));1===n.length?this.submitChipValueIfValid(n[0]):(this.internalValue=c(this.internalValue,n),this.onChange(this.internalValue),this.internalChipValue="")}else this.submitChipValueIfValid(i);else this.internalChipValue=""},e.prototype.onChipValueChange=function(e){this.internalChipValue=e},e.prototype.onChipEdit=function(e,t){this.internalValue=c(this.internalValue.slice(0,t),[e],this.internalValue.slice(t+1)),this.onChange(this.internalValue)},e.prototype.onRemoveChip=function(e){this.internalValue=this.internalValue.filter((function(t,i){return i!==e})),this.onChange(this.internalValue)},e.prototype.onInvalidChip=function(e){e?this.addRegexError():this.removeRegexError()},e.prototype.onBlur=function(){this.propagateTouch&&this.propagateTouch(),this.internalChipValue="",this.removeRegexError()},e.prototype.isValid=function(e){return!this.internalValidationRegex||(e&&!e.match(this.internalValidationRegex)?(this.addRegexError(),!1):(this.removeRegexError(),!0))},e.prototype.submitChipValueIfValid=function(e){this.isValid(e)?(this.internalValue=c(this.internalValue,[e]),this.onChange(this.internalValue),this.internalChipValue=""):this.internalChipValue=e},e.prototype.addRegexError=function(){this.ngControl.control.setErrors(Object.assign(Object.assign({},this.ngControl.errors),{regex:!0}))},e.prototype.removeRegexError=function(){var e,t,i,n,o,r,a;(null===(t=null===(e=this.ngControl)||void 0===e?void 0:e.control)||void 0===t?void 0:t.hasError("regex"))&&(null===(n=null===(i=this.ngControl)||void 0===i?void 0:i.control)||void 0===n||n.setErrors(Object.assign(Object.assign({},null===(o=this.ngControl)||void 0===o?void 0:o.errors),{regex:null})),null===(a=null===(r=this.ngControl)||void 0===r?void 0:r.control)||void 0===a||a.updateValueAndValidity())},e}();d.decorators=[{type:t.Component,args:[{selector:"sof-input-chips",template:'\n    <div\n      class="form-control d-flex flex-row flex-wrap"\n      [class.is-invalid]="\n        invalid ||\n        (ngControl?.invalid && (ngControl?.touched || form?.submitted))\n      "\n      tabindex="0"\n      (focus)="chipInput.focus()"\n    >\n      <sof-editable-chip\n        class="overflow-hidden"\n        *ngFor="let chip of internalValue; let index = index"\n        [label]="chip"\n        [validationRegex]="internalValidationRegex"\n        (editChip)="onChipEdit($event, index)"\n        (removeChip)="onRemoveChip(index)"\n        (invalidChip)="onInvalidChip($event)"\n      ></sof-editable-chip>\n\n      <input\n        #chipInput\n        type="text"\n        class="chip-input d-block flex-grow-1"\n        [value]="internalChipValue"\n        [placeholder]="placeholder"\n        [disabled]="isDisabled"\n        (blur)="onBlur()"\n        (input)="onChipValueChange($event.target?.value)"\n        (keydown.enter)="submitChip($event)"\n      />\n    </div>\n  ',providers:[{provide:o.SOF_FOCUS_COMPONENT,useExisting:d}],styles:[".form-control{height:auto}input,input:focus,input:hover{border:none;outline:none}.chip-input{min-width:50px}"]}]}],d.ctorParameters=function(){return[{type:n.FormComponent,decorators:[{type:t.Optional}]},{type:i.NgControl,decorators:[{type:t.Optional},{type:t.Host}]}]},d.propDecorators={labelForId:[{type:t.Input}],placeholder:[{type:t.Input}],isDisabled:[{type:t.Input}],invalid:[{type:t.Input}],validationRegex:[{type:t.Input}],separator:[{type:t.Input}],validators:[{type:t.Input}],changeValue:[{type:t.Output}],touch:[{type:t.Output}],chipInput:[{type:t.ViewChild,args:["chipInput"]}],value:[{type:t.Input}]};var f=function(){};f.decorators=[{type:t.NgModule,args:[{declarations:[d],imports:[a.CommonModule,s.SvgIconModule,u.NzTagModule,i.ReactiveFormsModule,l.EditableChipModule],exports:[d]}]}],e.InputChipsComponent=d,e.InputChipsModule=f,e.chipsRegexValidator=h,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=sofico-framework-ui-kit-components-input-chips.umd.min.js.map