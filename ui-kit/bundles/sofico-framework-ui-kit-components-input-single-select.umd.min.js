!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@sofico-framework/ui-kit/components/form"),require("@sofico-framework/ui-kit/directives/focus"),require("ngx-reactivetoolkit"),require("rxjs/operators"),require("@angular/common"),require("@ngx-translate/core"),require("@sofico-framework/ui-kit/components/loading"),require("ng-zorro-antd/select")):"function"==typeof define&&define.amd?define("@sofico-framework/ui-kit/components/input-single-select",["exports","@angular/core","@angular/forms","@sofico-framework/ui-kit/components/form","@sofico-framework/ui-kit/directives/focus","ngx-reactivetoolkit","rxjs/operators","@angular/common","@ngx-translate/core","@sofico-framework/ui-kit/components/loading","ng-zorro-antd/select"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self)["sofico-framework"]=e["sofico-framework"]||{},e["sofico-framework"]["ui-kit"]=e["sofico-framework"]["ui-kit"]||{},e["sofico-framework"]["ui-kit"].components=e["sofico-framework"]["ui-kit"].components||{},e["sofico-framework"]["ui-kit"].components["input-single-select"]={}),e.ng.core,e.ng.forms,e["sofico-framework"]["ui-kit"].components.form,e["sofico-framework"]["ui-kit"].directives.focus,e.ngxReactivetoolkit,e.rxjs.operators,e.ng.common,e.core$1,e["sofico-framework"]["ui-kit"].components.loading,e.select)}(this,(function(e,t,n,o,i,r,s,l,a,c,u){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function p(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s}Object.create;var g;Object.create;e.InputSingleSelectComponent=g=function(){function e(e,o,i){var r=this;this.form=e,this.ngControl=o,this.changeDetectorRef=i,this.size="large",this.showSearch=!0,this.clearable=!0,this.borderless=!1,this.searchLoading=!1,this.serverSearch=!1,this.notFoundContent=".NOT-FOUND",this.placeholder="",this.invalid=!1,this.changeValue=new t.EventEmitter,this.changeObjectValue=new t.EventEmitter,this.changeSearch=new t.EventEmitter,this.touch=new t.EventEmitter,this.internalFormControl=new n.FormControl(null),this.searchFn=function(e,t){var n;return null===(n=null==t?void 0:t.label)||void 0===n?void 0:n.toLowerCase().startsWith(e.toLowerCase())},this.nzSearchFn=function(e,t){return r.searchFn(e,{label:t.nzLabel,value:t.nzValue})},o&&(o.valueAccessor=this)}return e.prototype.sofFocus=function(){this.inputElement.nativeElement.getElementsByTagName("input")[0].focus(),this.changeDetectorRef.detectChanges()},e.prototype.ngOnInit=function(){var e=this;this.formattedOptions$=this.options$.pipe(s.map((function(e){return null!=e?e:[]})),s.map((function(t){return t.map((function(t){return{label:e.selectorLabel(t),value:e.selectorValue(t),disabled:e.selectorDisabled?e.selectorDisabled(t):null}}))}))),this.internalFormControl.valueChanges.pipe(r.takeUntilDestroy(this)).subscribe((function(t){if(!e.isDisabled){e.sofFocus(),e.changeValue.emit(t);var n=e.options.find((function(n){return e.selectorValue(n)===t}));e.changeObjectValue.emit(n),e.propagateChange&&e.propagateChange(t)}}))},e.prototype.ngOnChanges=function(){},e.prototype.ngOnDestroy=function(){var e;(null===(e=this.ngControl)||void 0===e?void 0:e.valueAccessor)&&(this.ngControl.valueAccessor.writeValue=function(){})},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){this.propagateTouch=e},e.prototype.writeValue=function(e){this.internalFormControl.setValue(null!=e?e:null,{emitEvent:!1})},e.prototype.onTouch=function(){this.touch.emit(),!this.isDisabled&&this.propagateTouch&&this.propagateTouch()},e.prototype.setDisabledState=function(e){this.isDisabled=e},e}(),e.InputSingleSelectComponent.decorators=[{type:t.Component,args:[{selector:"sof-input-single-select",encapsulation:t.ViewEncapsulation.None,template:'\n    <div class="single-select">\n      <nz-select\n        #inputElement\n        [@.disabled]="true"\n        [formControl]="internalFormControl"\n        [nzSize]="size"\n        [nzShowSearch]="showSearch"\n        [nzAllowClear]="clearable"\n        [nzBorderless]="borderless"\n        [nzDisabled]="isDisabled"\n        [nzFilterOption]="nzSearchFn"\n        [nzServerSearch]="serverSearch"\n        [nzPlaceHolder]="placeholder"\n        [nzNotFoundContent]="tc + notFoundContent | translate"\n        [class.is-invalid]="\n          invalid ||\n          (ngControl?.invalid && (ngControl?.touched || form?.submitted))\n        "\n        (nzBlur)="onTouch()"\n        (nzOnSearch)="changeSearch.emit($event)"\n      >\n        <ng-container *ngFor="let o of formattedOptions$ | async">\n          <nz-option\n            *ngIf="!searchLoading"\n            [nzValue]="o.value"\n            [nzLabel]="o.label"\n            [nzDisabled]="o.disabled"\n          ></nz-option>\n        </ng-container>\n        <nz-option *ngIf="searchLoading" nzDisabled nzCustomContent>\n          <sof-loading size="sm"></sof-loading>\n        </nz-option>\n      </nz-select>\n    </div>\n  ',providers:[{provide:i.SOF_FOCUS_COMPONENT,useExisting:g}],styles:["sof-input-single-select .ant-select-single.ant-select-lg:not(.ant-select-customize-input) .ant-select-selector{height:38px}sof-input-single-select nz-select{width:100%}sof-input-single-select .single-select nz-select-item,sof-input-single-select .single-select nz-select-placeholder{align-self:center}sof-input-single-select .single-select .ant-select.is-invalid:not(.ant-select-open) nz-select-top-control{background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem);transition:none}sof-input-single-select .single-select .ant-select.is-invalid:not(.ant-select-open) nz-select-arrow{margin-right:calc(1.5em + .75rem)}"]}]}],e.InputSingleSelectComponent.ctorParameters=function(){return[{type:o.FormComponent,decorators:[{type:t.Optional}]},{type:n.NgControl,decorators:[{type:t.Optional},{type:t.Host}]},{type:t.ChangeDetectorRef}]},e.InputSingleSelectComponent.propDecorators={tc:[{type:t.Input}],size:[{type:t.Input}],showSearch:[{type:t.Input}],clearable:[{type:t.Input}],borderless:[{type:t.Input}],searchLoading:[{type:t.Input}],serverSearch:[{type:t.Input}],notFoundContent:[{type:t.Input}],placeholder:[{type:t.Input}],labelForId:[{type:t.Input}],isDisabled:[{type:t.Input}],selectorLabel:[{type:t.Input}],selectorValue:[{type:t.Input}],selectorDisabled:[{type:t.Input}],options:[{type:t.Input}],invalid:[{type:t.Input}],changeValue:[{type:t.Output}],changeObjectValue:[{type:t.Output}],changeSearch:[{type:t.Output}],touch:[{type:t.Output}],inputElement:[{type:t.ViewChild,args:["inputElement",{read:t.ElementRef}]}],searchFn:[{type:t.Input}]},p([r.Changes("options")],e.InputSingleSelectComponent.prototype,"options$",void 0),e.InputSingleSelectComponent=g=p([r.UntilDestroy()],e.InputSingleSelectComponent);var f=function(){};f.decorators=[{type:t.NgModule,args:[{imports:[l.CommonModule,n.ReactiveFormsModule,u.NzSelectModule,n.FormsModule,a.TranslateModule,c.LoadingModule],declarations:[e.InputSingleSelectComponent],exports:[e.InputSingleSelectComponent]}]}],e.InputSingleSelectModule=f,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=sofico-framework-ui-kit-components-input-single-select.umd.min.js.map