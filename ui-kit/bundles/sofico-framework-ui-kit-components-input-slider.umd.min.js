!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@sofico-framework/ui-kit/directives/focus"),require("@sofico-framework/utils"),require("ngx-reactivetoolkit"),require("@angular/common"),require("@sofico-framework/ui-kit/components/input-currency"),require("@sofico-framework/ui-kit/components/input-number"),require("ng-zorro-antd/slider")):"function"==typeof define&&define.amd?define("@sofico-framework/ui-kit/components/input-slider",["exports","@angular/core","@angular/forms","@sofico-framework/ui-kit/directives/focus","@sofico-framework/utils","ngx-reactivetoolkit","@angular/common","@sofico-framework/ui-kit/components/input-currency","@sofico-framework/ui-kit/components/input-number","ng-zorro-antd/slider"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self)["sofico-framework"]=e["sofico-framework"]||{},e["sofico-framework"]["ui-kit"]=e["sofico-framework"]["ui-kit"]||{},e["sofico-framework"]["ui-kit"].components=e["sofico-framework"]["ui-kit"].components||{},e["sofico-framework"]["ui-kit"].components["input-slider"]={}),e.ng.core,e.ng.forms,e["sofico-framework"]["ui-kit"].directives.focus,e.utils,e.ngxReactivetoolkit,e.ng.common,e["sofico-framework"]["ui-kit"].components["input-currency"],e["sofico-framework"]["ui-kit"].components["input-number"],e.slider)}(this,(function(e,t,n,a,o,l,i,r,s,u){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */Object.create;var c;Object.create;e.InputSliderComponent=c=function(){function e(e,n,a){this.ngControl=e,this.changeDetectorRef=n,this.fb=a,this.localReversed=!1,this.localRange=!1,this.marks="both",this.maxFraction=0,this.changeValue=new t.EventEmitter,this.valueAfterRelease=new t.EventEmitter,this.localValueForm=this.fb.group({minValue:[],maxValue:[]}),this.localLabelFormatFn=function(e){return""+e},e&&(e.valueAccessor=this)}return Object.defineProperty(e.prototype,"range",{set:function(e){this.localRange=e,this.updateLocalValueForm()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reversed",{set:function(e){this.localReversed=e,this.calculateValue(this.calculatedValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){this.writeValue(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minValue",{set:function(e){this.localMinValue=e,this.calculateValue(this.calculatedValue),this.nzMarks=this.calculateMarks(this.localMinValue,this.localMaxValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxValue",{set:function(e){this.localMaxValue=e,this.calculateValue(this.calculatedValue),this.nzMarks=this.calculateMarks(this.localMinValue,this.localMaxValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelFormatFn",{set:function(e){this.localLabelFormatFn=e,this.nzMarks=this.calculateMarks(this.localMinValue,this.localMaxValue)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.localValueForm.valueChanges.pipe(l.takeUntilDestroy(this)).subscribe((function(t){var n;if(n=e.localRange?[t.minValue,t.maxValue]:t.maxValue,e.localRange){if(!o.isNullOrUndefined(n[0])&&!o.isNullOrUndefined(n[1])&&n[0]>n[1]&&n.reverse(),o.isNullOrUndefined(n[0])||n[0]<e.localMinValue?n[0]=e.localMinValue:(o.isNullOrUndefined(n[1])||n[1]>e.localMaxValue)&&(n[1]=e.localMaxValue),n[0]===e.internalValue[0]&&n[1]===e.internalValue[1])return}else if(o.isNullOrUndefined(n)?n=e.localReversed?e.localMinValue:e.localMaxValue:n<e.localMinValue?n=e.localMinValue:n>e.localMaxValue&&(n=e.localMaxValue),e.localReversed&&(n=e.calculateReversedValue(n)),n===e.internalValue)return;e.onChange(n)}))},e.prototype.onLoseFocus=function(){this.updateLocalValueForm(!0)},e.prototype.sofFocus=function(){var e=this.inputElement.nativeElement.getElementsByClassName("ant-slider-handle");e[e.length-1].focus(),this.changeDetectorRef.detectChanges()},e.prototype.ngOnDestroy=function(){var e;(null===(e=this.ngControl)||void 0===e?void 0:e.valueAccessor)&&(this.ngControl.valueAccessor.writeValue=function(){})},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){this.propagateTouch=e},e.prototype.writeValue=function(e){this.internalValue=null!=e?e:null,this.calculatedValue=this.internalValue,this.calculateValue(this.calculatedValue),this.updateLocalValueForm()},e.prototype.onChange=function(e,t){if(void 0===t&&(t=!1),!this.isDisabled){var n=null!=e?e:null;this.localReversed&&!o.isNullOrUndefined(n)?this.calculatedValue=this.calculateReversedValue(n):this.calculatedValue=n,t&&this.updateLocalValueForm(),this.changeValue.emit(this.calculatedValue),this.propagateChange&&(this.internalValue=n,this.propagateChange(this.calculatedValue))}},e.prototype.onTouch=function(e){this.valueAfterRelease.emit(e),!this.isDisabled&&this.propagateTouch&&this.propagateTouch()},e.prototype.setDisabledState=function(e){this.isDisabled=e},e.prototype.calculateValue=function(e){e&&"number"==typeof e&&this.localReversed&&this.localMaxValue&&this.localMinValue&&(this.internalValue=this.calculateReversedValue(e))},e.prototype.calculateReversedValue=function(e){return this.localMaxValue+this.localMinValue-e},e.prototype.calculateMarks=function(e,t){var n={};return"neither"===this.marks||(!o.isNumber(e)||"both"!==this.marks&&"min"!==this.marks||(n[e]=""),!o.isNumber(t)||"both"!==this.marks&&"max"!==this.marks||(n[t]="")),n},e.prototype.updateLocalValueForm=function(e){var t,n;void 0===e&&(e=!1),this.localRange?this.localValueForm.reset({minValue:null===(t=this.calculatedValue)||void 0===t?void 0:t[0],maxValue:null===(n=this.calculatedValue)||void 0===n?void 0:n[1]},{emitEvent:e}):this.localValueForm.reset({maxValue:this.calculatedValue},{emitEvent:e})},e}(),e.InputSliderComponent.decorators=[{type:t.Component,args:[{selector:"sof-input-slider",encapsulation:t.ViewEncapsulation.None,template:'\n    <nz-slider\n      #inputElement\n      [ngModel]="internalValue"\n      [nzRange]="localRange"\n      [nzMin]="localMinValue"\n      [nzMax]="localMaxValue"\n      [nzMarks]="nzMarks"\n      [nzDisabled]="isDisabled"\n      [nzReverse]="localReversed"\n      nzTooltipVisible="never"\n      (ngModelChange)="onChange($event, true)"\n      (nzOnAfterChange)="onTouch($event)"\n    ></nz-slider>\n    <div class="marks">\n      <div>\n        <ng-container *ngIf="marks === \'both\' || marks === \'min\'">\n          {{ localMinValue | sofLabelFormatFn: localLabelFormatFn }}\n        </ng-container>\n      </div>\n      <div>\n        <ng-container *ngIf="marks === \'both\' || marks === \'max\'">\n          {{ localMaxValue | sofLabelFormatFn: localLabelFormatFn }}\n        </ng-container>\n      </div>\n    </div>\n    <div\n      class="d-flex mt-2"\n      [class.justify-content-between]="localRange"\n      [class.justify-content-end]="!localReversed"\n    >\n      <sof-input-number\n        *ngIf="localRange"\n        class="slider-input"\n        [formControl]="localValueForm.controls.minValue"\n        [maxFraction]="maxFraction"\n        [isDisabled]="isDisabled"\n        (touch)="onLoseFocus()"\n      ></sof-input-number>\n      <sof-input-number\n        class="slider-input"\n        [formControl]="localValueForm.controls.maxValue"\n        [maxFraction]="maxFraction"\n        [isDisabled]="isDisabled"\n        (touch)="onLoseFocus()"\n      ></sof-input-number>\n    </div>\n  ',providers:[{provide:a.SOF_FOCUS_COMPONENT,useExisting:c}],styles:["sof-input-slider{display:block}sof-input-slider .current-value-wrapper{display:flex;justify-content:center;align-items:center}sof-input-slider .current-value-wrapper .current-value{padding:.25rem .5rem;border-radius:2px;font-size:.875rem}sof-input-slider .marks{display:flex;justify-content:space-between;font-size:.875rem;color:grey}sof-input-slider nz-slider .ant-slider-with-marks{margin-bottom:10px}sof-input-slider nz-slider .ant-slider-dot,sof-input-slider nz-slider .ant-slider-handle{border-width:1px}sof-input-slider .input-wrapper{width:100%;display:flex;justify-content:space-between;align-items:center}sof-input-slider .slider-input{max-width:40%}sof-input-slider input{text-align:right}"]}]}],e.InputSliderComponent.ctorParameters=function(){return[{type:n.NgControl,decorators:[{type:t.Optional},{type:t.Host}]},{type:t.ChangeDetectorRef},{type:n.FormBuilder}]},e.InputSliderComponent.propDecorators={isDisabled:[{type:t.Input}],range:[{type:t.Input}],reversed:[{type:t.Input}],marks:[{type:t.Input}],maxFraction:[{type:t.Input}],value:[{type:t.Input}],minValue:[{type:t.Input}],maxValue:[{type:t.Input}],labelFormatFn:[{type:t.Input}],changeValue:[{type:t.Output}],valueAfterRelease:[{type:t.Output}],inputElement:[{type:t.ViewChild,args:["inputElement",{read:t.ElementRef}]}]},e.InputSliderComponent=c=function(e,t,n,a){var o,l=arguments.length,i=l<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(i=(l<3?o(i):l>3?o(t,n,i):o(t,n))||i);return l>3&&i&&Object.defineProperty(t,n,i),i}([l.UntilDestroy()],e.InputSliderComponent);var p=function(){function e(){}return e.prototype.transform=function(e,t){return t(e)},e}();p.decorators=[{type:t.Pipe,args:[{name:"sofLabelFormatFn"}]}];var d=function(){};d.decorators=[{type:t.NgModule,args:[{imports:[u.NzSliderModule,n.ReactiveFormsModule,n.FormsModule,i.CommonModule,s.InputNumberModule,r.InputCurrencyModule],declarations:[e.InputSliderComponent,p],exports:[e.InputSliderComponent]}]}],e.InputSliderModule=d,e.LabelFormatFnPipe=p,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=sofico-framework-ui-kit-components-input-slider.umd.min.js.map