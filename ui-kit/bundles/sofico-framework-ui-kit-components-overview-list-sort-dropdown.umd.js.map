{"version":3,"file":"sofico-framework-ui-kit-components-overview-list-sort-dropdown.umd.js","sources":["../../../../projects/sofico-framework/ui-kit/components/overview-list-sort-dropdown/overview-list-sort-dropdown.component.ts","../../../../projects/sofico-framework/ui-kit/components/overview-list-sort-dropdown/overview-list-sort-dropdown.module.ts","../../../../projects/sofico-framework/ui-kit/components/overview-list-sort-dropdown/sofico-framework-ui-kit-components-overview-list-sort-dropdown.ts"],"sourcesContent":["import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  Output\n} from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { OverviewListConfig } from '@sofico-framework/ui-kit/classes';\nimport { SortingOrderConfig } from '@sofico-framework/utils';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n@Component({\n  selector: 'sof-overview-list-sort-dropdown',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <div class=\"input-group mb-3\">\n      <div class=\"input-group-prepend\">\n        <button\n          sofButton\n          [icon]=\"\n            sorting?.order === 'asc'\n              ? 'icon-sort-amount-asc'\n              : 'icon-sort-amount-desc'\n          \"\n          class=\"btn\"\n          type=\"button\"\n          (click)=\"changeDirection()\"\n        ></button>\n      </div>\n      <sof-input-single-select\n        [tc]=\"tc\"\n        class=\"form-control\"\n        [formControl]=\"form\"\n        [options]=\"dropDownChoices$ | async\"\n        [selectorLabel]=\"selectorLabel\"\n        [selectorValue]=\"selectorValue\"\n        [clearable]=\"false\"\n        [showSearch]=\"false\"\n        (changeObjectValue)=\"onChange($event)\"\n      ></sof-input-single-select>\n    </div>\n  `,\n  styleUrls: ['./overview-list-sort-dropdown.component.scss']\n})\nexport class OverviewListSortDropdownComponent<T> {\n  labels: string[];\n  plainSorts: boolean[];\n  selectors: ((entity: T) => any)[];\n  dropDownChoices$: Observable<{ translation: string; index: number }[]>;\n\n  form = this.fb.control(0);\n\n  @Input() tc: string;\n  @Input() sorting: SortingOrderConfig<T>;\n\n  @Input() set overviewListConfig(config: OverviewListConfig<T>) {\n    this.selectors = config?.functionalProps\n      ?.filter(prop => prop.sortable)\n      ?.map(prop => prop?.selector);\n    this.plainSorts = config?.functionalProps\n      ?.filter(prop => prop.sortable)\n      ?.map(prop => prop?.plainSort);\n    this.labels = config?.functionalProps\n      ?.filter(prop => prop.sortable)\n      ?.map(prop => prop?.label);\n    this.dropDownChoices$ = this.mapToTranslatedDropDownChoices();\n  }\n\n  @Output()\n  changeSorting = new EventEmitter<SortingOrderConfig<T>>();\n\n  selectorLabel = x => x?.translation;\n  selectorValue = x => x?.index;\n\n  constructor(\n    private translateService: TranslateService,\n    private fb: FormBuilder\n  ) {}\n\n  changeDirection(): void {\n    this.changeSorting.emit({\n      prop: this.sorting?.prop,\n      plainSort: this.sorting?.plainSort,\n      order: this.sorting?.order === 'asc' ? 'desc' : 'asc'\n    });\n  }\n\n  onChange(obj: { translation: string; index: number }): void {\n    this.changeSorting.emit({\n      prop: this.selectors[obj.index],\n      plainSort: this.plainSorts[obj.index],\n      order: this.sorting?.order\n    });\n  }\n\n  mapToTranslatedDropDownChoices(): Observable<\n    { translation: string; index: number }[]\n  > {\n    const arrayReadyTranslate = this.labels.map(label => this.tc + '.' + label);\n    return this.translateService.stream(arrayReadyTranslate).pipe(\n      map(obj =>\n        Object.keys(obj).map((key, index) => {\n          return {\n            translation: obj[key],\n            index\n          };\n        })\n      )\n    );\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ButtonModule } from '@sofico-framework/ui-kit/components/button';\nimport { InputSingleSelectModule } from '@sofico-framework/ui-kit/components/input-single-select';\nimport { SvgIconModule } from '@sofico-framework/ui-kit/components/svg-icon';\nimport { OverviewListSortDropdownComponent } from './overview-list-sort-dropdown.component';\n\n@NgModule({\n  declarations: [OverviewListSortDropdownComponent],\n  exports: [OverviewListSortDropdownComponent],\n  imports: [\n    CommonModule,\n    SvgIconModule,\n    TranslateModule,\n    InputSingleSelectModule,\n    FormsModule,\n    ReactiveFormsModule,\n    ButtonModule\n  ]\n})\nexport class OverviewListSortDropdownModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["EventEmitter","map","Component","ChangeDetectionStrategy","TranslateService","FormBuilder","Input","Output","NgModule","CommonModule","SvgIconModule","TranslateModule","InputSingleSelectModule","FormsModule","ReactiveFormsModule","ButtonModule"],"mappings":"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"}