{"version":3,"sources":["../../../../projects/sofico-framework/ui-kit/components/overview-list-item/overview-list-item.component.ts","../../../../projects/sofico-framework/ui-kit/components/overview-list-item/overview-list-item.module.ts"],"names":["OverviewListItemComponent","componentFactoryResolver","viewContainerRef","interactivityChecker","this","Object","defineProperty","prototype","tc","localTc","componentRef","instance","entity","localEntity","ngOnInit","factory","resolveComponentFactory","dynamicRowComponent","createComponent","sofFocus","isFocusable","location","nativeElement","focus","_a","firstChild","Error","Component","args","selector","changeDetection","ChangeDetectionStrategy","OnPush","template","providers","provide","SOF_FOCUS_COMPONENT","useExisting","ComponentFactoryResolver","ViewContainerRef","InteractivityChecker","Input","NgModule","declarations","exports","imports","CommonModule"],"mappings":"q4BA0DE,SAAAA,EACUC,EACAC,EACAC,GAFAC,KAAAH,yBAAAA,EACAG,KAAAF,iBAAAA,EACAE,KAAAD,qBAAAA,SA3BVE,OAAAC,eAAaN,EAAAO,UAAA,KAAE,KAAf,SAAgBC,GACdJ,KAAKK,QAAUD,EAEXJ,KAAKM,eACNN,KAAKM,aAAaC,SAAiBH,GAAKJ,KAAKK,0CAOlDJ,OAAAC,eAAaN,EAAAO,UAAA,SAAM,KAAnB,SAAoBK,GAClBR,KAAKS,YAAcD,EAEfR,KAAKM,eACNN,KAAKM,aAAaC,SAAiBC,OAASR,KAAKS,8CAetDb,EAAAO,UAAAO,SAAA,WACE,IAAMC,EAAUX,KAAKH,yBAAyBe,wBAC5CZ,KAAKa,qBAEPb,KAAKM,aAAeN,KAAKF,iBAAiBgB,gBAAgBH,GACzDX,KAAKM,aAAaC,SAAiBH,GAAKJ,KAAKK,QAC7CL,KAAKM,aAAaC,SAAiBC,OAASR,KAAKS,aAGpDb,EAAAO,UAAAY,SAAA,iBACE,GACEf,KAAKM,aAAaC,UAEhB,mBADOP,KAAKM,aAAaC,SAAgCQ,SAGzDf,KAAKM,aAAaC,SAAgCQ,gBAC/C,GACLf,KAAKD,qBAAqBiB,YACxBhB,KAAKM,aAAaW,SAASC,eAG7BlB,KAAKM,aAAaW,SAASC,cAAcC,YACpC,CAAA,IACLnB,KAAKD,qBAAqBiB,YACgB,QADLI,EACnCpB,KAAKM,aAAaW,SAASC,qBAAa,IAAAE,OAAA,EAAAA,EAAEC,YAK5C,MAAMC,MACJ,+DAHFtB,KAAKM,aAAaW,SAASC,cAAcG,WAAWF,mCA1EzDI,EAAAA,UAASC,KAAA,CAAC,CACTC,SAAU,yBACVC,gBAAiBC,EAAAA,wBAAwBC,OACzCC,SAAU,GAEVC,UAAW,CACT,CAAEC,QAASC,EAAAA,oBAAqBC,YAAarC,6DAnB/CsC,EAAAA,gCAKAC,EAAAA,wBATOC,EAAAA,oDAkCNC,EAAAA,sBAWAA,EAAAA,mCAWAA,EAAAA,eC/CH,iCALCC,EAAAA,SAAQd,KAAA,CAAC,CACRe,aAAc,CAAC3C,GACf4C,QAAS,CAAC5C,GACV6C,QAAS,CAACC,EAAAA","sourcesContent":["import { InteractivityChecker } from '@angular/cdk/a11y';\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  ComponentFactoryResolver,\n  ComponentRef,\n  Input,\n  OnInit,\n  Type,\n  ViewContainerRef\n} from '@angular/core';\nimport {\n  OnSofFocus,\n  SOF_FOCUS_COMPONENT\n} from '@sofico-framework/ui-kit/directives/focus';\nimport { ListItemComponent } from '@sofico-framework/ui-kit/types';\n\n@Component({\n  selector: 'sof-overview-list-item',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: ``,\n  styleUrls: ['./overview-list-item.component.scss'],\n  providers: [\n    { provide: SOF_FOCUS_COMPONENT, useExisting: OverviewListItemComponent }\n  ]\n})\nexport class OverviewListItemComponent<T> implements OnInit, OnSofFocus {\n  private componentRef: ComponentRef<ListItemComponent<T>>;\n  private localTc: string;\n  private localEntity: T;\n\n  /**\n   * The translation context.\n   */\n  @Input() set tc(tc: string) {\n    this.localTc = tc;\n\n    if (this.componentRef) {\n      (this.componentRef.instance as any).tc = this.localTc;\n    }\n  }\n\n  /**\n   * The entity we want to set.\n   */\n  @Input() set entity(entity: T) {\n    this.localEntity = entity;\n\n    if (this.componentRef) {\n      (this.componentRef.instance as any).entity = this.localEntity;\n    }\n  }\n\n  /**\n   * The component that must be dynamically injected into the template.\n   */\n  @Input() dynamicRowComponent: Type<ListItemComponent<T>>;\n\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private viewContainerRef: ViewContainerRef,\n    private interactivityChecker: InteractivityChecker\n  ) {}\n\n  ngOnInit(): void {\n    const factory = this.componentFactoryResolver.resolveComponentFactory(\n      this.dynamicRowComponent\n    );\n    this.componentRef = this.viewContainerRef.createComponent(factory);\n    (this.componentRef.instance as any).tc = this.localTc;\n    (this.componentRef.instance as any).entity = this.localEntity;\n  }\n\n  sofFocus(): void {\n    if (\n      this.componentRef.instance &&\n      typeof ((this.componentRef.instance as any) as OnSofFocus).sofFocus ===\n        'function'\n    ) {\n      ((this.componentRef.instance as any) as OnSofFocus).sofFocus();\n    } else if (\n      this.interactivityChecker.isFocusable(\n        this.componentRef.location.nativeElement\n      )\n    ) {\n      this.componentRef.location.nativeElement.focus();\n    } else if (\n      this.interactivityChecker.isFocusable(\n        this.componentRef.location.nativeElement?.firstChild\n      )\n    ) {\n      this.componentRef.location.nativeElement.firstChild.focus();\n    } else {\n      throw Error(\n        'The dynamic row component nor its first child is focusable.'\n      );\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { OverviewListItemComponent } from './overview-list-item.component';\n\n@NgModule({\n  declarations: [OverviewListItemComponent],\n  exports: [OverviewListItemComponent],\n  imports: [CommonModule]\n})\nexport class OverviewListItemModule {}\n"]}