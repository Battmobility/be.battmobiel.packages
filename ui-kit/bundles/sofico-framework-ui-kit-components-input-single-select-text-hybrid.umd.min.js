!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@sofico-framework/ui-kit/components/form"),require("@sofico-framework/ui-kit/directives/focus"),require("@sofico-framework/utils"),require("ngx-reactivetoolkit"),require("rxjs/operators"),require("@angular/common"),require("@ngx-translate/core"),require("ng-zorro-antd/select")):"function"==typeof define&&define.amd?define("@sofico-framework/ui-kit/components/input-single-select-text-hybrid",["exports","@angular/core","@angular/forms","@sofico-framework/ui-kit/components/form","@sofico-framework/ui-kit/directives/focus","@sofico-framework/utils","ngx-reactivetoolkit","rxjs/operators","@angular/common","@ngx-translate/core","ng-zorro-antd/select"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self)["sofico-framework"]=e["sofico-framework"]||{},e["sofico-framework"]["ui-kit"]=e["sofico-framework"]["ui-kit"]||{},e["sofico-framework"]["ui-kit"].components=e["sofico-framework"]["ui-kit"].components||{},e["sofico-framework"]["ui-kit"].components["input-single-select-text-hybrid"]={}),e.ng.core,e.ng.forms,e["sofico-framework"]["ui-kit"].components.form,e["sofico-framework"]["ui-kit"].directives.focus,e.utils,e.ngxReactivetoolkit,e.rxjs.operators,e.ng.common,e.core$1,e.select)}(this,(function(e,t,n,o,i,r,l,s,a,c,u){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function p(e,t,n,o){var i,r=arguments.length,l=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(l=(r<3?i(l):r>3?i(t,n,l):i(t,n))||l);return r>3&&l&&Object.defineProperty(t,n,l),l}Object.create;var h;Object.create;e.InputSingleSelectTextHybridComponent=h=function(){function e(e,o,i){var r=this;this.form=e,this.ngControl=o,this.changeDetectorRef=i,this.size="large",this.showSearch=!0,this.borderless=!1,this.notFoundContent=".NOT-FOUND",this.placeholder="",this.invalid=!1,this.clearable=!0,this.changeValue=new t.EventEmitter,this.changeObjectValue=new t.EventEmitter,this.touch=new t.EventEmitter,this.internalFormControl=new n.FormControl(null),this.searchFn=function(e,t){var n;return null===(n=null==t?void 0:t.label)||void 0===n?void 0:n.toLowerCase().startsWith(e.toLowerCase())},this.nzSearchFn=function(e,t){return r.searchFn(e,{label:t.nzLabel,value:t.nzValue})},o&&(o.valueAccessor=this)}return e.prototype.sofFocus=function(){this.freeForm?this.inputElement.nativeElement.focus():this.nzSelectElement&&(this.nzSelectElement.nativeElement.getElementsByTagName("input")[0].focus(),this.changeDetectorRef.detectChanges())},e.prototype.ngOnInit=function(){var e=this;this.formattedOptions$=this.options$.pipe(s.map((function(e){return null!=e?e:[]})),s.map((function(t){return t.map((function(t){return{label:e.selectorLabel(t),value:e.selectorValue(t),disabled:e.selectorDisabled?e.selectorDisabled(t):null}}))})),r.hotSafe()),this.disabled$.pipe(l.takeUntilDestroy(this)).subscribe((function(t){t?e.internalFormControl.disable({emitEvent:!1}):e.internalFormControl.enable({emitEvent:!1})})),this.freeForm$.pipe(l.takeUntilDestroy(this)).subscribe((function(t){null!==e.internalFormControl.value&&(e.internalFormControl.patchValue(null),e.onChange())})),this.internalFormControl.valueChanges.pipe(l.takeUntilDestroy(this)).subscribe((function(t){if(!e.isDisabled){e.freeForm||e.sofFocus(),e.changeValue.emit(t);var n=e.options.find((function(n){return e.selectorValue(n)===t}));e.changeObjectValue.emit(n),e.propagateChange&&e.propagateChange(t)}}))},e.prototype.ngOnChanges=function(){},e.prototype.ngOnDestroy=function(){var e;(null===(e=this.ngControl)||void 0===e?void 0:e.valueAccessor)&&(this.ngControl.valueAccessor.writeValue=function(){})},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){this.propagateTouch=e},e.prototype.writeValue=function(e){this.internalFormControl.setValue(null!=e?e:null,{emitEvent:!1})},e.prototype.onChange=function(){var e=this;if(!this.isDisabled){this.changeValue.emit(this.internalFormControl.value);var t=this.options.find((function(t){return e.selectorValue(t)===e.internalFormControl.value}));this.changeObjectValue.emit(t),this.propagateChange&&this.propagateChange(this.internalFormControl.value)}},e.prototype.onTouch=function(){this.touch.emit(),!this.isDisabled&&this.propagateTouch&&this.propagateTouch()},e.prototype.setDisabledState=function(e){this.isDisabled=e,e?this.internalFormControl.disable({emitEvent:!1}):this.internalFormControl.enable({emitEvent:!1})},e}(),e.InputSingleSelectTextHybridComponent.decorators=[{type:t.Component,args:[{selector:"sof-input-single-select-text-hybrid",encapsulation:t.ViewEncapsulation.None,template:'\n    <div class="single-select" *ngIf="!freeForm">\n      <nz-select\n        #nzSelectElement\n        [@.disabled]="true"\n        [formControl]="internalFormControl"\n        [nzOptions]="formattedOptions$ | async"\n        [nzSize]="size"\n        [nzShowSearch]="showSearch"\n        [nzAllowClear]="clearable"\n        [nzBorderless]="borderless"\n        [nzDisabled]="isDisabled"\n        [nzFilterOption]="nzSearchFn"\n        [nzPlaceHolder]="placeholder"\n        [nzNotFoundContent]="tc + notFoundContent | translate"\n        [class.is-invalid]="\n          invalid ||\n          (ngControl?.invalid && (ngControl?.touched || form?.submitted))\n        "\n        (nzBlur)="onTouch()"\n      ></nz-select>\n    </div>\n    <input\n      #inputElement\n      *ngIf="freeForm"\n      type="text"\n      [attr.id]="labelForId"\n      [formControl]="internalFormControl"\n      class="form-control"\n      [class.is-invalid]="\n        invalid ||\n        (ngControl?.invalid && (ngControl?.touched || form?.submitted))\n      "\n      [placeholder]="placeholder"\n      (input)="onChange()"\n      (blur)="onTouch()"\n    />\n  ',providers:[{provide:i.SOF_FOCUS_COMPONENT,useExisting:h}],styles:["sof-input-single-select-text-hybrid .ant-select-single.ant-select-lg:not(.ant-select-customize-input) .ant-select-selector{height:38px}sof-input-single-select-text-hybrid nz-select{width:100%}sof-input-single-select-text-hybrid .single-select nz-select-item,sof-input-single-select-text-hybrid .single-select nz-select-placeholder{align-self:center}sof-input-single-select-text-hybrid .single-select .ant-select.is-invalid:not(.ant-select-open) nz-select-top-control{background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem);transition:none}sof-input-single-select-text-hybrid .single-select .ant-select.is-invalid:not(.ant-select-open) nz-select-arrow{margin-right:calc(1.5em + .75rem)}"]}]}],e.InputSingleSelectTextHybridComponent.ctorParameters=function(){return[{type:o.FormComponent,decorators:[{type:t.Optional}]},{type:n.NgControl,decorators:[{type:t.Optional},{type:t.Host}]},{type:t.ChangeDetectorRef}]},e.InputSingleSelectTextHybridComponent.propDecorators={tc:[{type:t.Input}],size:[{type:t.Input}],showSearch:[{type:t.Input}],borderless:[{type:t.Input}],notFoundContent:[{type:t.Input}],freeForm:[{type:t.Input}],labelForId:[{type:t.Input}],isDisabled:[{type:t.Input}],placeholder:[{type:t.Input}],options:[{type:t.Input}],selectorLabel:[{type:t.Input}],selectorValue:[{type:t.Input}],selectorDisabled:[{type:t.Input}],invalid:[{type:t.Input}],clearable:[{type:t.Input}],changeValue:[{type:t.Output}],changeObjectValue:[{type:t.Output}],touch:[{type:t.Output}],inputElement:[{type:t.ViewChild,args:["inputElement"]}],nzSelectElement:[{type:t.ViewChild,args:["nzSelectElement",{read:t.ElementRef}]}],searchFn:[{type:t.Input}]},p([l.Changes("options")],e.InputSingleSelectTextHybridComponent.prototype,"options$",void 0),p([l.Changes("isDisabled")],e.InputSingleSelectTextHybridComponent.prototype,"disabled$",void 0),p([l.Changes("freeForm")],e.InputSingleSelectTextHybridComponent.prototype,"freeForm$",void 0),e.InputSingleSelectTextHybridComponent=h=p([l.UntilDestroy()],e.InputSingleSelectTextHybridComponent);var d=function(){};d.decorators=[{type:t.NgModule,args:[{imports:[a.CommonModule,n.ReactiveFormsModule,u.NzSelectModule,c.TranslateModule],declarations:[e.InputSingleSelectTextHybridComponent],exports:[e.InputSingleSelectTextHybridComponent]}]}],e.InputSingleSelectTextHybridModule=d,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=sofico-framework-ui-kit-components-input-single-select-text-hybrid.umd.min.js.map