!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@sofico-framework/utils")):"function"==typeof define&&define.amd?define("@sofico-framework/ui-kit/components/number-base",["exports","@angular/core","@sofico-framework/utils"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self)["sofico-framework"]=e["sofico-framework"]||{},e["sofico-framework"]["ui-kit"]=e["sofico-framework"]["ui-kit"]||{},e["sofico-framework"]["ui-kit"].components=e["sofico-framework"]["ui-kit"].components||{},e["sofico-framework"]["ui-kit"].components["number-base"]={}),e.ng.core,e.utils)}(this,(function(e,t,i){"use strict";var o=function(){function e(){this.placeholder="",this.changeValue=new t.EventEmitter,this.touch=new t.EventEmitter,this.internalValue=null,this.fractionDigits=2,this.regex=this.buildMaxFractionRegex(this.fractionDigits)}return Object.defineProperty(e.prototype,"maxFraction",{set:function(e){this.fractionDigits=e,this.regex=this.buildMaxFractionRegex(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){this.propagateTouch=e},e.prototype.writeValue=function(e){var t=this.toDecimal(e);if(null==t)this.internalValue=null;else if(t.match(this.regex))this.internalValue=t;else{var i=t.indexOf(".")+this.fractionDigits;this.internalValue=t.substr(0,i+1)}},e.prototype.onChange=function(e){if(!this.isDisabled){var t=this.updateValueByUserInput(e);this.changeValue.emit(t),this.propagateChange&&void 0!==t&&this.propagateChange(null===t?null:Number(t.replace(/,/g,".")))}},e.prototype.updateValueByUserInput=function(e){if(void 0!==e){var t=this.toDecimal(e);if(void 0!==t)return(null==t?void 0:t.match(this.regex))||i.isNullOrUndefined(t)?(["-","+",".",","].indexOf(e)>-1||(this.internalValue=t),t):(this.blockInputValue(),this.internalValue);this.blockInputValue()}},e.prototype.onTouch=function(){this.touch.emit(),!this.isDisabled&&this.propagateTouch&&this.propagateTouch()},e.prototype.setDisabledState=function(e){this.isDisabled=e},e.prototype.blockInputValue=function(){this.inputElement.nativeElement.value=this.internalValue},e.prototype.toDecimal=function(e){var t;if(null==e||""===e)t=null;else{var i=e.toString();"-"===i?t="-0":["+",".",","].indexOf(i)>-1?t="0":!Number.isNaN(Number(i.replace(/,/g,".")))&&(i.match(/^[\+\-]?[0-9.,]+$/)||[]).length&&(t=i)}return t},e.prototype.buildMaxFractionRegex=function(e){return new RegExp("^[\\+\\-]*\\d*[\\,\\.]?\\d{0,"+e+"}$","g")},e}();o.decorators=[{type:t.Directive}],o.propDecorators={labelForId:[{type:t.Input}],isDisabled:[{type:t.Input}],placeholder:[{type:t.Input}],invalid:[{type:t.Input}],maxFraction:[{type:t.Input}],changeValue:[{type:t.Output}],touch:[{type:t.Output}],inputElement:[{type:t.ViewChild,args:["inputElement"]}]},e.InputNumberBaseDirective=o,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=sofico-framework-ui-kit-components-number-base.umd.min.js.map