!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/cdk/overlay"),require("@angular/cdk/portal"),require("@angular/core"),require("@angular/cdk/a11y"),require("@angular/common"),require("@ngx-translate/core"),require("@sofico-framework/ui-kit/components/alert"),require("@sofico-framework/ui-kit/components/button"),require("@sofico-framework/ui-kit/components/svg-icon"),require("@sofico-framework/ui-kit/directives/focus"),require("@sofico-framework/utils"),require("ngx-reactivetoolkit"),require("rxjs"),require("rxjs/operators"),require("@angular/common/http")):"function"==typeof define&&define.amd?define("@sofico-framework/ui-kit/components/dialog",["exports","@angular/cdk/overlay","@angular/cdk/portal","@angular/core","@angular/cdk/a11y","@angular/common","@ngx-translate/core","@sofico-framework/ui-kit/components/alert","@sofico-framework/ui-kit/components/button","@sofico-framework/ui-kit/components/svg-icon","@sofico-framework/ui-kit/directives/focus","@sofico-framework/utils","ngx-reactivetoolkit","rxjs","rxjs/operators","@angular/common/http"],n):n(((e="undefined"!=typeof globalThis?globalThis:e||self)["sofico-framework"]=e["sofico-framework"]||{},e["sofico-framework"]["ui-kit"]=e["sofico-framework"]["ui-kit"]||{},e["sofico-framework"]["ui-kit"].components=e["sofico-framework"]["ui-kit"].components||{},e["sofico-framework"]["ui-kit"].components.dialog={}),e.ng.cdk.overlay,e.ng.cdk.portal,e.ng.core,e.ng.cdk.a11y,e.ng.common,e.core,e["sofico-framework"]["ui-kit"].components.alert,e["sofico-framework"]["ui-kit"].components.button,e["sofico-framework"]["ui-kit"].components["svg-icon"],e["sofico-framework"]["ui-kit"].directives.focus,e.utils,e.ngxReactivetoolkit,e.rxjs,e.rxjs.operators,e.ng.common.http)}(this,(function(e,n,t,o,r,i,a,s,c,l,d,p,f,u,g,m){"use strict";var y=function(e){this.overlay=e,this.positionStrategy=this.overlay.position().global().centerHorizontally().centerVertically(),this.overlayConfig={maxHeight:"auto",height:"auto",width:"600px",hasBackdrop:!0,scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:this.positionStrategy}};y.ɵprov=o.ɵɵdefineInjectable({factory:function(){return new y(o.ɵɵinject(n.Overlay))},token:y,providedIn:"root"}),y.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],y.ctorParameters=function(){return[{type:n.Overlay}]};var b=function(){function e(e,n){this.overlay=e,this.dialogConfigService=n,this.size="sm",this.sizeHeaderIcon="16",this.destroy=new o.EventEmitter}return e.prototype.ngOnInit=function(){switch(this.size){case"sm":this.dialogConfigService.overlayConfig.width="600px";break;case"md":this.dialogConfigService.overlayConfig.width="800px";break;case"lg":this.dialogConfigService.overlayConfig.width="1000px";break;case"xl":this.dialogConfigService.overlayConfig.width="1200px";break;default:this.dialogConfigService.overlayConfig.width="600px"}this.overlayRef=this.overlay.create(this.dialogConfigService.overlayConfig)},e.prototype.ngAfterViewInit=function(){this.overlayRef.attach(this.portal)},e.prototype.ngOnDestroy=function(){this.overlayRef.detach(),this.overlayRef.dispose()},e}();b.decorators=[{type:o.Component,args:[{selector:"sof-dialog",template:'\n    <ng-template cdkPortal>\n      <sof-dialog-inner\n        [icon]="icon"\n        [sizeHeaderIcon]="sizeHeaderIcon"\n        (destroy)="destroy.emit()"\n        [headerLabel]="headerLabel"\n        [hideDestroy]="hideDestroy"\n      >\n        <ng-content sof-dialog-body select="[sof-dialog-body]"></ng-content>\n        <ng-content sof-dialog-footer select="[sof-dialog-footer]"></ng-content>\n      </sof-dialog-inner>\n    </ng-template>\n  ',styles:[""]}]}],b.ctorParameters=function(){return[{type:n.Overlay},{type:y}]},b.propDecorators={portal:[{type:o.ViewChild,args:[t.CdkPortal]}],headerLabel:[{type:o.Input}],size:[{type:o.Input}],sizeHeaderIcon:[{type:o.Input}],icon:[{type:o.Input}],hideDestroy:[{type:o.Input}],destroy:[{type:o.Output}]};function v(e,n,t,o){var r,i=arguments.length,a=i<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,t,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(n,t,a):r(n,t))||a);return i>3&&a&&Object.defineProperty(n,t,a),a}Object.create;Object.create;var h=function(){this.acknowledge=new o.EventEmitter};h.decorators=[{type:o.Component,args:[{selector:"sof-acknowledge-dialog",template:'\n    <sof-dialog-inner\n      (destroy)="acknowledge.emit()"\n      [headerLabel]="\n        disableHeaderLabelTranslation\n          ? headerLabel\n          : (tc + \'.\' + headerLabel | translate)\n      "\n    >\n      <div sof-dialog-body>\n        <div *ngFor="let error of actingErrorMessages$ | async" class="mb-3">\n          <sof-alert type="danger">\n            {{\n              error?.translation\n                ? error?.translation\n                : (tc + \'.\' + error?.message | translate: error?.messageParams)\n            }}\n          </sof-alert>\n        </div>\n        {{\n          disableBodyLabelTranslation\n            ? bodyLabel\n            : (tc + \'.\' + bodyLabel | translate)\n        }}\n      </div>\n      <div sof-dialog-footer class="button-wrapper">\n        <button\n          sofButton\n          sofFocus\n          class="btn btn-primary btn-min-width order-1"\n          [loading]="acting$ | async"\n          [disabled]="acting$ | async"\n          (click)="acknowledge.emit()"\n        >\n          {{ tc + \'.\' + acknowledgeLabel | translate }}\n        </button>\n      </div>\n    </sof-dialog-inner>\n  ',styles:[":host{display:flex;width:100%}.button-wrapper{display:flex;justify-content:flex-end;align-items:center;margin-top:1rem;margin-bottom:1rem}.button-wrapper button{margin-right:.25rem}.button-wrapper button:first-of-type{margin-right:0}@media (max-width:575px){.button-wrapper{flex-direction:column;width:100%}.button-wrapper button{width:100%;margin-bottom:.5rem}.button-wrapper button:first-of-type{margin-bottom:0}}"]}]}],h.propDecorators={headerLabel:[{type:o.Input}],acknowledgeLabel:[{type:o.Input}],tc:[{type:o.Input}],bodyLabel:[{type:o.Input}],disableHeaderLabelTranslation:[{type:o.Input}],disableBodyLabelTranslation:[{type:o.Input}],acknowledge:[{type:o.Output}]},v([p.Acting()],h.prototype,"acting$",void 0),v([p.ActingErrorMessages()],h.prototype,"actingErrorMessages$",void 0);var w=function(){this.decline=new o.EventEmitter,this.confirm=new o.EventEmitter};w.decorators=[{type:o.Component,args:[{selector:"sof-confirm-dialog",template:'\n    <sof-dialog-inner\n      (destroy)="decline.emit()"\n      [headerLabel]="tc + \'.\' + headerLabel | translate: labelParams"\n    >\n      <div sof-dialog-body>\n        <div *ngFor="let error of actingErrorMessages$ | async" class="mb-3">\n          <sof-alert type="danger">\n            {{\n              error?.translation\n                ? error?.translation\n                : (tc + \'.\' + error?.message | translate: error?.messageParams)\n            }}\n          </sof-alert>\n        </div>\n        {{ tc + \'.\' + bodyLabel | translate: labelParams }}\n      </div>\n      <div sof-dialog-footer class="button-wrapper">\n        <ng-container *ngIf="primaryAction === \'confirm\'; else otherAction">\n          <button\n            sofButton\n            sofFocus\n            class="btn btn-primary btn-min-width order-1"\n            (click)="confirm.emit()"\n            [loading]="!disableActing && (acting$ | async)"\n            [disabled]="!disableActing && (acting$ | async)"\n          >\n            {{ tc + \'.\' + confirmLabel | translate }}\n          </button>\n          <button\n            sofButton\n            class="btn btn-outline-primary btn-min-width mr-2 order-0"\n            (click)="decline.emit()"\n            [disabled]="!disableActing && (acting$ | async)"\n          >\n            {{ tc + \'.\' + cancelLabel | translate }}\n          </button>\n        </ng-container>\n        <ng-template #otherAction>\n          <button\n            sofButton\n            sofFocus\n            class="btn btn-primary btn-min-width order-1"\n            (click)="decline.emit()"\n            [disabled]="acting$ | async"\n          >\n            {{ tc + \'.\' + cancelLabel | translate }}\n          </button>\n          <button\n            sofButton\n            class="btn btn-outline-primary btn-min-width mr-2 order-0"\n            (click)="confirm.emit()"\n            [loading]="!disableActing && (acting$ | async)"\n            [disabled]="!disableActing && (acting$ | async)"\n          >\n            {{ tc + \'.\' + confirmLabel | translate }}\n          </button>\n        </ng-template>\n      </div>\n    </sof-dialog-inner>\n  ',styles:[":host{display:flex;width:100%}.button-wrapper{display:flex;justify-content:flex-end;align-items:center}.button-wrapper button{margin-right:.25rem}.button-wrapper button:first-of-type{margin-right:0}@media (max-width:575px){.button-wrapper{flex-direction:column;width:100%}.button-wrapper button{width:100%;margin-right:0;margin-bottom:.5rem}.button-wrapper button:first-of-type{margin-bottom:0}}"]}]}],w.propDecorators={headerLabel:[{type:o.Input}],cancelLabel:[{type:o.Input}],confirmLabel:[{type:o.Input}],disableActing:[{type:o.Input}],tc:[{type:o.Input}],bodyLabel:[{type:o.Input}],primaryAction:[{type:o.Input}],labelParams:[{type:o.Input}],decline:[{type:o.Output}],confirm:[{type:o.Output}]},v([p.Acting()],w.prototype,"acting$",void 0),v([p.ActingErrorMessages()],w.prototype,"actingErrorMessages$",void 0),e.DialogInnerComponent=function(){function e(e){this.documentRefService=e,this.sizeHeaderIcon="16",this.destroy=new o.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;u.fromEvent(this.documentRefService.nativeDocument,"keydown").pipe(g.filter((function(e){return"Escape"===e.key})),f.takeUntilDestroy(this)).subscribe((function(){e.hideDestroy||e.destroy.emit()}))},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout((function(){var n,t;return null===(t=null===(n=e.closeButtonRef)||void 0===n?void 0:n.nativeElement)||void 0===t?void 0:t.blur()}),0)},e.prototype.ngOnDestroy=function(){},e}(),e.DialogInnerComponent.decorators=[{type:o.Component,args:[{selector:"sof-dialog-inner",template:'\n    <div class="sof-dialog-inner-wrapper" cdkTrapFocus cdkTrapFocusAutoCapture>\n      <div\n        class="sof-dialog-inner-wrapper-header"\n        *ngIf="headerLabel || !hideDestroy"\n      >\n        <div class="d-flex flex-row">\n          <sof-svg-icon\n            [icon]="icon"\n            [size]="sizeHeaderIcon"\n            *ngIf="icon"\n            class="d-flex mr-3 my-auto"\n          ></sof-svg-icon>\n          <h1>{{ headerLabel }}</h1>\n        </div>\n        <button class="btn btn-plain" (click)="destroy.emit()" #closeButton>\n          <sof-svg-icon *ngIf="!hideDestroy" icon="icon-cross"></sof-svg-icon>\n        </button>\n      </div>\n      <div\n        class="sof-dialog-inner-wrapper-body"\n        [class.padding-top]="!(headerLabel || !hideDestroy)"\n        [class.padding-bottom]="footer?.childNodes?.length === 0"\n      >\n        <ng-content select="[sof-dialog-body]"></ng-content>\n      </div>\n      <div\n        [class.sof-dialog-inner-wrapper-footer]="footer?.childNodes?.length > 0"\n        #footer\n      >\n        <ng-content select="[sof-dialog-footer]"></ng-content>\n      </div>\n    </div>\n  ',styles:[":host{display:flex;width:100%}.sof-dialog-inner-wrapper{flex-direction:column;display:flex;width:100%;background:#fff;box-shadow:0 4px 4px hsla(0,0%,76.9%,.6)}.sof-dialog-inner-wrapper-header{padding:20px 20px 1rem;display:flex;justify-content:space-between;align-items:flex-start}.sof-dialog-inner-wrapper-header h2{margin:0}.sof-dialog-inner-wrapper-body{overflow-y:auto;flex:1;width:100%;padding:0 20px}.sof-dialog-inner-wrapper-body.padding-top{padding-top:20px}.sof-dialog-inner-wrapper-body.padding-bottom{padding-bottom:20px}.sof-dialog-inner-wrapper-footer{padding:1rem 20px 20px;display:flex;justify-content:flex-end;align-items:center}"]}]}],e.DialogInnerComponent.ctorParameters=function(){return[{type:p.DocumentRefService}]},e.DialogInnerComponent.propDecorators={headerLabel:[{type:o.Input}],hideDestroy:[{type:o.Input}],icon:[{type:o.Input}],sizeHeaderIcon:[{type:o.Input}],destroy:[{type:o.Output}],closeButtonRef:[{type:o.ViewChild,args:["closeButton"]}]},e.DialogInnerComponent=v([f.UntilDestroy()],e.DialogInnerComponent);var k=function(){this.decline=new o.EventEmitter,this.confirm=new o.EventEmitter};k.decorators=[{type:o.Component,args:[{selector:"sof-interactive-warning-dialog",template:'\n    <sof-dialog-inner\n      (destroy)="decline.emit()"\n      [headerLabel]="tc + \'.INTERACTIVE-WARNING-HEADER\' | translate"\n    >\n      <div sof-dialog-body>\n        <div class="mb-3" *ngFor="let error of actingErrorMessages$ | async">\n          <sof-alert type="danger">\n            {{\n              error?.translation\n                ? error?.translation\n                : (tc + \'.\' + error?.message | translate: error?.messageParams)\n            }}\n          </sof-alert>\n        </div>\n        {{ tc + \'.INTERACTIVE-WARNING-BODY\' | translate }}\n        <ul>\n          <li *ngFor="let error of errors">{{ error }}</li>\n        </ul>\n      </div>\n      <div\n        sof-dialog-footer\n        class="d-flex justify-content-end align-items-center"\n      >\n        <button\n          sofButton\n          sofFocus\n          class="btn btn-primary btn-min-width order-1"\n          (click)="confirm.emit()"\n          [loading]="acting$ | async"\n          [disabled]="acting$ | async"\n        >\n          {{ tc + \'.CONTINUE\' | translate }}\n        </button>\n        <button\n          sofButton\n          class="btn btn-outline-primary btn-min-width mr-2 order-0"\n          (click)="decline.emit()"\n          [disabled]="acting$ | async"\n        >\n          {{ tc + \'.CANCEL\' | translate }}\n        </button>\n      </div>\n    </sof-dialog-inner>\n  ',styles:[":host{display:flex;width:100%}.button-wrapper{display:flex;justify-content:flex-end;align-items:center}.button-wrapper button{margin-right:.25rem}.button-wrapper button:first-of-type{margin-right:0}@media (max-width:575px){.button-wrapper{flex-direction:column;width:100%}.button-wrapper button{width:100%;margin-right:0;margin-bottom:.5rem}.button-wrapper button:first-of-type{margin-bottom:0}}"]}]}],k.propDecorators={errors:[{type:o.Input}],tc:[{type:o.Input}],bodyLabel:[{type:o.Input}],decline:[{type:o.Output}],confirm:[{type:o.Output}]},v([p.Acting()],k.prototype,"acting$",void 0),v([p.ActingErrorMessages()],k.prototype,"actingErrorMessages$",void 0);var I=function(){function e(e,n,t){this.injector=e,this.overlay=n,this.dialogConfigService=t}return e.prototype.handleInteractiveFlow=function(e,n,t){var o=this,r=e.pipe(g.catchError((function(e){return u.of(e)})),g.share()),i=r.pipe(g.filter((function(e){return!(e instanceof m.HttpErrorResponse)}))),a=r.pipe(g.filter((function(e){var n;return e instanceof m.HttpErrorResponse&&(null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.isInteractiveWarning)})),g.switchMap((function(e){var r=o.openInteractiveWarning(t,e);return r.confirm$.pipe(g.switchMap((function(){return n})),g.finalize((function(){return r.destroy()})))})));return u.merge(i,a)},e.prototype.openInteractiveWarning=function(e,n){var o,r,i,a,s=new t.ComponentPortal(k,null,this.injector),c=this.overlay.create(this.dialogConfigService.overlayConfig),l=c.attach(s);return l.instance.tc=e,l.instance.errors=(null===(o=null==n?void 0:n.error)||void 0===o?void 0:o.message)?[null===(i=null===(r=null==n?void 0:n.error)||void 0===r?void 0:r.message)||void 0===i?void 0:i.translation]:null===(a=null==n?void 0:n.error)||void 0===a?void 0:a.messages.map((function(e){return null==e?void 0:e.translation})),l.instance.decline.subscribe((function(){c.detach(),c.dispose()})),{confirm$:l.instance.confirm.asObservable(),decline$:l.instance.decline.asObservable(),destroy:function(){c.detach(),c.dispose()}}},e.prototype.openConfirmModal=function(e,n,o,r,i,a,s,c){void 0===a&&(a="confirm"),void 0===s&&(s={}),void 0===c&&(c=!1);var l=new t.ComponentPortal(w,null,this.injector),d=this.overlay.create(this.dialogConfigService.overlayConfig),p=d.attach(l);return p.instance.tc=e,p.instance.headerLabel=n,p.instance.bodyLabel=o,p.instance.cancelLabel=r,p.instance.confirmLabel=i,p.instance.primaryAction=a,p.instance.labelParams=s,p.instance.disableActing=c,p.instance.decline.subscribe((function(){d.detach(),d.dispose()})),{confirm$:p.instance.confirm.asObservable(),decline$:p.instance.decline.asObservable(),destroy:function(){d.detach(),d.dispose()}}},e.prototype.openAcknowledgeModal=function(e,n,o,r,i,a){void 0===i&&(i=!1),void 0===a&&(a=!1);var s=new t.ComponentPortal(h,null,this.injector),c=this.overlay.create(this.dialogConfigService.overlayConfig),l=c.attach(s);return l.instance.tc=e,l.instance.headerLabel=n,l.instance.bodyLabel=o,l.instance.disableHeaderLabelTranslation=i,l.instance.disableBodyLabelTranslation=a,l.instance.acknowledgeLabel=r,l.instance.acknowledge.subscribe((function(){c.detach(),c.dispose()})),{acknowledge$:l.instance.acknowledge.asObservable(),destroy:function(){c.detach(),c.dispose()}}},e}();I.decorators=[{type:o.Injectable}],I.ctorParameters=function(){return[{type:o.Injector},{type:n.Overlay},{type:y}]};var x=function(){};x.decorators=[{type:o.NgModule,args:[{declarations:[b,e.DialogInnerComponent,w,h,k],exports:[b,e.DialogInnerComponent,w,h,k],imports:[i.CommonModule,t.PortalModule,n.OverlayModule,l.SvgIconModule,a.TranslateModule,c.ButtonModule,s.AlertModule,r.A11yModule,d.FocusModule],providers:[I]}]}],e.AcknowledgeDialogComponent=h,e.ConfirmDialogComponent=w,e.DialogComponent=b,e.DialogConfigService=y,e.DialogModule=x,e.DialogService=I,e.InteractiveWarningDialogComponent=k,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=sofico-framework-ui-kit-components-dialog.umd.min.js.map