{"version":3,"file":"sofico-framework-ui-kit-components-wizard-nav-bar.js","sources":["../../../../projects/sofico-framework/ui-kit/components/wizard-nav-bar/wizard-nav-bar.component.ts","../../../../projects/sofico-framework/ui-kit/components/wizard-nav-bar/wizard-nav-bar.module.ts","../../../../projects/sofico-framework/ui-kit/components/wizard-nav-bar/sofico-framework-ui-kit-components-wizard-nav-bar.ts"],"sourcesContent":["import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  OnChanges,\n  OnInit\n} from '@angular/core';\nimport { NavigationEnd, Router } from '@angular/router';\nimport { Changes } from 'ngx-reactivetoolkit';\nimport { combineLatest, Observable } from 'rxjs';\nimport { filter, map, startWith } from 'rxjs/operators';\nimport { FlowStep } from './types/flow-step.type';\n\n@Component({\n  selector: 'sof-wizard-nav-bar',\n  styleUrls: ['./wizard-nav-bar.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <div class=\"col\">\n      <div class=\"row\">\n        <a\n          *ngFor=\"let step of steps; let i = index\"\n          class=\"col step-wrapper\"\n          [class.enable-future-steps]=\"enableFutureSteps\"\n          [routerLink]=\"[step.routePath]\"\n          queryParamsHandling=\"preserve\"\n          [class.before-active]=\"i < (indexActiveStep$ | async)\"\n          [class.after-active]=\"i > (indexActiveStep$ | async)\"\n          [class.active]=\"i === (indexActiveStep$ | async)\"\n          [class.step-disabled]=\"step.disabled\"\n          [tabindex]=\"\n            i > (indexActiveStep$ | async) && !enableFutureSteps ? -1 : 0\n          \"\n          (click)=\"blur($event)\"\n        >\n          <div class=\"row justify-content-center label\">\n            {{ tc + '.' + step.label | translate }}\n          </div>\n          <div class=\"row justify-content-center circle-wrapper\">\n            <div class=\"circle\"></div>\n          </div>\n          <div class=\"row line-wrapper\">\n            <span class=\"line\"></span>\n          </div>\n        </a>\n      </div>\n    </div>\n  `\n})\nexport class WizardNavBarComponent implements OnChanges, OnInit {\n  @Input() tc: string;\n  @Input() steps: FlowStep[];\n  @Input() enableFutureSteps = false;\n\n  @Changes('steps') steps$: Observable<FlowStep[]>;\n\n  indexActiveStep$: Observable<number>;\n  private triggerCalc$ = this.router.events.pipe(\n    filter(event => event instanceof NavigationEnd),\n    startWith({})\n  );\n\n  constructor(private router: Router) {}\n\n  ngOnInit(): void {\n    this.indexActiveStep$ = combineLatest([\n      this.triggerCalc$,\n      this.steps$\n    ]).pipe(map(([triggerCalc, steps]) => this.getIndexActiveStep(steps)));\n  }\n\n  ngOnChanges(): void {}\n\n  blur(event: any): void {\n    const path = event.path || (event.composedPath && event.composedPath());\n    path[0].blur();\n  }\n\n  private getIndexActiveStep(flowSteps: FlowStep[]): number {\n    for (let i = flowSteps.length; i--; ) {\n      const flowStep = flowSteps[i];\n      let params;\n      if (flowStep.queryParams) {\n        params = Object.keys(flowStep.queryParams).reduce(\n          (concat, key) =>\n            `${concat}&${encodeURIComponent(key)}=${encodeURIComponent(\n              flowStep.queryParams[key]\n            )}`,\n          '?'\n        );\n      }\n      // The route is active if the router returns isActive as true.\n      if (\n        this.router.isActive(\n          `${flowStep.routePath}${params ? params : ''}`,\n          false // exact route path match\n        )\n      ) {\n        return i;\n      }\n    }\n    return undefined;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { WizardNavBarComponent } from './wizard-nav-bar.component';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, TranslateModule],\n  declarations: [WizardNavBarComponent],\n  exports: [WizardNavBarComponent]\n})\nexport class WizardNavBarModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":";;;;;;;;;MAiDa,qBAAqB;IAahC,YAAoB,MAAc;QAAd,WAAM,GAAN,MAAM,CAAQ;QAVzB,sBAAiB,GAAG,KAAK,CAAC;QAK3B,iBAAY,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAC5C,MAAM,CAAC,KAAK,IAAI,KAAK,YAAY,aAAa,CAAC,EAC/C,SAAS,CAAC,EAAE,CAAC,CACd,CAAC;KAEoC;IAEtC,QAAQ;QACN,IAAI,CAAC,gBAAgB,GAAG,aAAa,CAAC;YACpC,IAAI,CAAC,YAAY;YACjB,IAAI,CAAC,MAAM;SACZ,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,WAAW,EAAE,KAAK,CAAC,KAAK,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;KACxE;IAED,WAAW,MAAW;IAEtB,IAAI,CAAC,KAAU;QACb,MAAM,IAAI,GAAG,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,YAAY,IAAI,KAAK,CAAC,YAAY,EAAE,CAAC,CAAC;QACxE,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;KAChB;IAEO,kBAAkB,CAAC,SAAqB;QAC9C,KAAK,IAAI,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,GAAI;YACpC,MAAM,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;YAC9B,IAAI,MAAM,CAAC;YACX,IAAI,QAAQ,CAAC,WAAW,EAAE;gBACxB,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,MAAM,CAC/C,CAAC,MAAM,EAAE,GAAG,KACV,GAAG,MAAM,IAAI,kBAAkB,CAAC,GAAG,CAAC,IAAI,kBAAkB,CACxD,QAAQ,CAAC,WAAW,CAAC,GAAG,CAAC,CAC1B,EAAE,EACL,GAAG,CACJ,CAAC;aACH;;YAED,IACE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAClB,GAAG,QAAQ,CAAC,SAAS,GAAG,MAAM,GAAG,MAAM,GAAG,EAAE,EAAE,EAC9C,KAAK;aACN,EACD;gBACA,OAAO,CAAC,CAAC;aACV;SACF;QACD,OAAO,SAAS,CAAC;KAClB;;;YAzFF,SAAS,SAAC;gBACT,QAAQ,EAAE,oBAAoB;gBAE9B,eAAe,EAAE,uBAAuB,CAAC,MAAM;gBAC/C,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA8BT;;aACF;;;YAzCuB,MAAM;;;iBA2C3B,KAAK;oBACL,KAAK;gCACL,KAAK;;AAEY;IAAjB,OAAO,CAAC,OAAO,CAAC;qDAAgC;;MC3CtC,kBAAkB;;;YAL9B,QAAQ,SAAC;gBACR,OAAO,EAAE,CAAC,YAAY,EAAE,YAAY,EAAE,eAAe,CAAC;gBACtD,YAAY,EAAE,CAAC,qBAAqB,CAAC;gBACrC,OAAO,EAAE,CAAC,qBAAqB,CAAC;aACjC;;;ACVD;;;;;;"}