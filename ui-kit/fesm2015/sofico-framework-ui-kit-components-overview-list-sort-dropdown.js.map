{"version":3,"file":"sofico-framework-ui-kit-components-overview-list-sort-dropdown.js","sources":["../../../../projects/sofico-framework/ui-kit/components/overview-list-sort-dropdown/overview-list-sort-dropdown.component.ts","../../../../projects/sofico-framework/ui-kit/components/overview-list-sort-dropdown/overview-list-sort-dropdown.module.ts","../../../../projects/sofico-framework/ui-kit/components/overview-list-sort-dropdown/sofico-framework-ui-kit-components-overview-list-sort-dropdown.ts"],"sourcesContent":["import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  Output\n} from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { OverviewListConfig } from '@sofico-framework/ui-kit/classes';\nimport { SortingOrderConfig } from '@sofico-framework/utils';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n@Component({\n  selector: 'sof-overview-list-sort-dropdown',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <div class=\"input-group mb-3\">\n      <div class=\"input-group-prepend\">\n        <button\n          sofButton\n          [icon]=\"\n            sorting?.order === 'asc'\n              ? 'icon-sort-amount-asc'\n              : 'icon-sort-amount-desc'\n          \"\n          class=\"btn\"\n          type=\"button\"\n          (click)=\"changeDirection()\"\n        ></button>\n      </div>\n      <sof-input-single-select\n        [tc]=\"tc\"\n        class=\"form-control\"\n        [formControl]=\"form\"\n        [options]=\"dropDownChoices$ | async\"\n        [selectorLabel]=\"selectorLabel\"\n        [selectorValue]=\"selectorValue\"\n        [clearable]=\"false\"\n        [showSearch]=\"false\"\n        (changeObjectValue)=\"onChange($event)\"\n      ></sof-input-single-select>\n    </div>\n  `,\n  styleUrls: ['./overview-list-sort-dropdown.component.scss']\n})\nexport class OverviewListSortDropdownComponent<T> {\n  labels: string[];\n  plainSorts: boolean[];\n  selectors: ((entity: T) => any)[];\n  dropDownChoices$: Observable<{ translation: string; index: number }[]>;\n\n  form = this.fb.control(0);\n\n  @Input() tc: string;\n  @Input() sorting: SortingOrderConfig<T>;\n\n  @Input() set overviewListConfig(config: OverviewListConfig<T>) {\n    this.selectors = config?.functionalProps\n      ?.filter(prop => prop.sortable)\n      ?.map(prop => prop?.selector);\n    this.plainSorts = config?.functionalProps\n      ?.filter(prop => prop.sortable)\n      ?.map(prop => prop?.plainSort);\n    this.labels = config?.functionalProps\n      ?.filter(prop => prop.sortable)\n      ?.map(prop => prop?.label);\n    this.dropDownChoices$ = this.mapToTranslatedDropDownChoices();\n  }\n\n  @Output()\n  changeSorting = new EventEmitter<SortingOrderConfig<T>>();\n\n  selectorLabel = x => x?.translation;\n  selectorValue = x => x?.index;\n\n  constructor(\n    private translateService: TranslateService,\n    private fb: FormBuilder\n  ) {}\n\n  changeDirection(): void {\n    this.changeSorting.emit({\n      prop: this.sorting?.prop,\n      plainSort: this.sorting?.plainSort,\n      order: this.sorting?.order === 'asc' ? 'desc' : 'asc'\n    });\n  }\n\n  onChange(obj: { translation: string; index: number }): void {\n    this.changeSorting.emit({\n      prop: this.selectors[obj.index],\n      plainSort: this.plainSorts[obj.index],\n      order: this.sorting?.order\n    });\n  }\n\n  mapToTranslatedDropDownChoices(): Observable<\n    { translation: string; index: number }[]\n  > {\n    const arrayReadyTranslate = this.labels.map(label => this.tc + '.' + label);\n    return this.translateService.stream(arrayReadyTranslate).pipe(\n      map(obj =>\n        Object.keys(obj).map((key, index) => {\n          return {\n            translation: obj[key],\n            index\n          };\n        })\n      )\n    );\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ButtonModule } from '@sofico-framework/ui-kit/components/button';\nimport { InputSingleSelectModule } from '@sofico-framework/ui-kit/components/input-single-select';\nimport { SvgIconModule } from '@sofico-framework/ui-kit/components/svg-icon';\nimport { OverviewListSortDropdownComponent } from './overview-list-sort-dropdown.component';\n\n@NgModule({\n  declarations: [OverviewListSortDropdownComponent],\n  exports: [OverviewListSortDropdownComponent],\n  imports: [\n    CommonModule,\n    SvgIconModule,\n    TranslateModule,\n    InputSingleSelectModule,\n    FormsModule,\n    ReactiveFormsModule,\n    ButtonModule\n  ]\n})\nexport class OverviewListSortDropdownModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}