{"version":3,"file":"sofico-framework-ui-kit-components-form.js","sources":["../../../../projects/sofico-framework/ui-kit/components/form/form.component.ts","../../../../projects/sofico-framework/ui-kit/components/form/form.module.ts","../../../../projects/sofico-framework/ui-kit/components/form/sofico-framework-ui-kit-components-form.ts"],"sourcesContent":["import {\n  Component,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output\n} from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { takeUntilDestroy, UntilDestroy } from 'ngx-reactivetoolkit';\nimport { Subject } from 'rxjs';\nimport { distinctUntilChanged, startWith } from 'rxjs/operators';\n\n@UntilDestroy()\n@Component({\n  selector: 'sof-form',\n  styleUrls: ['./form.component.scss'],\n  template: `\n    <form [formGroup]=\"formGroup\" (submit)=\"onSubmit()\">\n      <ng-content></ng-content>\n    </form>\n  `\n})\nexport class FormComponent implements OnInit, OnDestroy {\n  /**\n   * The translation context.\n   */\n  @Input() tc: string;\n  /**\n   * Contains the form that the wrapped form controls use.\n   */\n  @Input() formGroup: FormGroup;\n  /**\n   * EventEmitter that will emit when the form is submitted.\n   */\n  @Output() formSubmit = new EventEmitter<any>();\n  /**\n   * EventEmitter that will emit when the form is dirty. This means that\n   * the user has changed the form's value.\n   */\n  @Output() formDirty = new EventEmitter<boolean>();\n  submitted = false;\n  actualErrorMap: { [key: string]: string } = {\n    required: 'VALIDATION_REQUIRED',\n    email: 'VALIDATION_EMAIL',\n    maxLength: 'VALIDATION_MAX-LENGTH',\n    inRange: 'VALIDATION_NOT-IN-RANGE',\n    phoneNumber: 'VALIDATION_PHONE-NUMBER',\n    isInteger: 'VALIDATION_NOT-IS-INTEGER'\n  };\n  private formDirty$ = new Subject<boolean>();\n\n  /**\n   * Contains a map of error translation keys that match the validators identifier.\n   * The validators that are supported by default are:\n   * - required\n   * - email\n   * - maxLength\n   * - inRange\n   * - phoneNumber\n   * - isInteger\n   */\n  @Input() set errorMap(map: { [key: string]: string }) {\n    this.actualErrorMap = {\n      ...this.actualErrorMap,\n      ...map\n    };\n  }\n\n  ngOnInit(): void {\n    this.formDirty$\n      .pipe(distinctUntilChanged(), takeUntilDestroy(this))\n      .subscribe(dirty => this.formDirty.emit(dirty));\n\n    this.formGroup.valueChanges\n      .pipe(startWith(null), takeUntilDestroy(this))\n      .subscribe(() => {\n        if (this.submitted && !this.formGroup.dirty) {\n          this.submitted = false;\n        }\n\n        this.formDirty$.next(this.formGroup.dirty);\n      });\n  }\n\n  ngOnDestroy(): void {}\n\n  onSubmit(): void {\n    this.submitted = true;\n    this.formSubmit.emit(this.formGroup.value);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { FormComponent } from './form.component';\n\n@NgModule({\n  imports: [CommonModule, ReactiveFormsModule, TranslateModule],\n  declarations: [FormComponent],\n  exports: [FormComponent]\n})\nexport class FormModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":";;;;;;;;;IAuBa,aAAa,SAAb,aAAa;;;;;QAYd,eAAU,GAAG,IAAI,YAAY,EAAO,CAAC;;;;;QAKrC,cAAS,GAAG,IAAI,YAAY,EAAW,CAAC;QAClD,cAAS,GAAG,KAAK,CAAC;QAClB,mBAAc,GAA8B;YAC1C,QAAQ,EAAE,qBAAqB;YAC/B,KAAK,EAAE,kBAAkB;YACzB,SAAS,EAAE,uBAAuB;YAClC,OAAO,EAAE,yBAAyB;YAClC,WAAW,EAAE,yBAAyB;YACtC,SAAS,EAAE,2BAA2B;SACvC,CAAC;QACM,eAAU,GAAG,IAAI,OAAO,EAAW,CAAC;KAyC7C;;;;;;;;;;;IA7BC,IAAa,QAAQ,CAAC,GAA8B;QAClD,IAAI,CAAC,cAAc,mCACd,IAAI,CAAC,cAAc,GACnB,GAAG,CACP,CAAC;KACH;IAED,QAAQ;QACN,IAAI,CAAC,UAAU;aACZ,IAAI,CAAC,oBAAoB,EAAE,EAAE,gBAAgB,CAAC,IAAI,CAAC,CAAC;aACpD,SAAS,CAAC,KAAK,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QAElD,IAAI,CAAC,SAAS,CAAC,YAAY;aACxB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,gBAAgB,CAAC,IAAI,CAAC,CAAC;aAC7C,SAAS,CAAC;YACT,IAAI,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE;gBAC3C,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;aACxB;YAED,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;SAC5C,CAAC,CAAC;KACN;IAED,WAAW,MAAW;IAEtB,QAAQ;QACN,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;KAC5C;EACF;;YA7EA,SAAS,SAAC;gBACT,QAAQ,EAAE,UAAU;gBAEpB,QAAQ,EAAE;;;;GAIT;;aACF;;;iBAKE,KAAK;wBAIL,KAAK;yBAIL,MAAM;wBAKN,MAAM;uBAsBN,KAAK;;AAvCK,aAAa;IAVzB,YAAY,EAAE;GAUF,aAAa,CAoEzB;;MChFY,UAAU;;;YALtB,QAAQ,SAAC;gBACR,OAAO,EAAE,CAAC,YAAY,EAAE,mBAAmB,EAAE,eAAe,CAAC;gBAC7D,YAAY,EAAE,CAAC,aAAa,CAAC;gBAC7B,OAAO,EAAE,CAAC,aAAa,CAAC;aACzB;;;ACVD;;;;;;"}