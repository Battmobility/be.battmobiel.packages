{"version":3,"file":"sofico-framework-ui-kit-components-in-view.js","sources":["../../../../projects/sofico-framework/ui-kit/components/in-view/in-view.component.ts","../../../../projects/sofico-framework/ui-kit/components/in-view/in-view.module.ts","../../../../projects/sofico-framework/ui-kit/components/in-view/sofico-framework-ui-kit-components-in-view.ts"],"sourcesContent":["import {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  ViewChild\n} from '@angular/core';\n\n@Component({\n  selector: 'sof-in-view',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <ng-content></ng-content>\n    <div class=\"in-slice\">\n      <div #targetRef></div>\n    </div>\n  `,\n  styleUrls: ['./in-view.component.scss']\n})\nexport class InViewComponent implements OnInit, OnDestroy {\n  @Input() scrollableRef: any = null;\n  @Input() preloadHeight = 0;\n\n  @Output() inView = new EventEmitter<boolean>();\n\n  @ViewChild('targetRef', { read: ElementRef, static: true })\n  targetRef: ElementRef;\n\n  private intersectionObserver: IntersectionObserver;\n\n  ngOnInit(): void {\n    // We should only emit the most recent event\n    const fn = (entries: IntersectionObserverEntry[]) =>\n      this.inView.emit(\n        entries.sort((a, b) => (a.time > b.time ? -1 : 1))?.[0]?.isIntersecting\n      );\n\n    this.intersectionObserver = new IntersectionObserver(fn, {\n      root: this.scrollableRef,\n      rootMargin: `0px 0px ${this.preloadHeight}px 0px`\n    });\n\n    this.intersectionObserver.observe(this.targetRef.nativeElement);\n  }\n\n  ngOnDestroy(): void {\n    this.intersectionObserver.disconnect();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { InViewComponent } from './in-view.component';\n\n@NgModule({\n  declarations: [InViewComponent],\n  exports: [InViewComponent],\n  imports: [CommonModule]\n})\nexport class InViewModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":";;;MAuBa,eAAe;IAX5B;QAYW,kBAAa,GAAQ,IAAI,CAAC;QAC1B,kBAAa,GAAG,CAAC,CAAC;QAEjB,WAAM,GAAG,IAAI,YAAY,EAAW,CAAC;KAyBhD;IAlBC,QAAQ;;QAEN,MAAM,EAAE,GAAG,CAAC,OAAoC;;YAC9C,OAAA,IAAI,CAAC,MAAM,CAAC,IAAI,aACd,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,0CAAG,CAAC,2CAAG,cAAc,CACxE,CAAA;SAAA,CAAC;QAEJ,IAAI,CAAC,oBAAoB,GAAG,IAAI,oBAAoB,CAAC,EAAE,EAAE;YACvD,IAAI,EAAE,IAAI,CAAC,aAAa;YACxB,UAAU,EAAE,WAAW,IAAI,CAAC,aAAa,QAAQ;SAClD,CAAC,CAAC;QAEH,IAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;KACjE;IAED,WAAW;QACT,IAAI,CAAC,oBAAoB,CAAC,UAAU,EAAE,CAAC;KACxC;;;YAvCF,SAAS,SAAC;gBACT,QAAQ,EAAE,aAAa;gBACvB,eAAe,EAAE,uBAAuB,CAAC,MAAM;gBAC/C,QAAQ,EAAE;;;;;GAKT;;aAEF;;;4BAEE,KAAK;4BACL,KAAK;qBAEL,MAAM;wBAEN,SAAS,SAAC,WAAW,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,MAAM,EAAE,IAAI,EAAE;;;MCpB/C,YAAY;;;YALxB,QAAQ,SAAC;gBACR,YAAY,EAAE,CAAC,eAAe,CAAC;gBAC/B,OAAO,EAAE,CAAC,eAAe,CAAC;gBAC1B,OAAO,EAAE,CAAC,YAAY,CAAC;aACxB;;;ACRD;;;;;;"}