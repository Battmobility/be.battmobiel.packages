!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports,require("@angular/common"),require("@angular/core"),require("@sofico-framework/utils")):"function"==typeof define&&define.amd?define("@sofico-framework/app-config",["exports","@angular/common","@angular/core","@sofico-framework/utils"],i):i(((e="undefined"!=typeof globalThis?globalThis:e||self)["sofico-framework"]=e["sofico-framework"]||{},e["sofico-framework"]["app-config"]={}),e.ng.common,e.ng.core,e.utils)}(this,(function(e,i,o,t){"use strict";var r=new o.InjectionToken("app-config-token"),n=function(){function e(e,i,o){var t,r,n;if(this.appConfig=e,this.windowRefService=i,this.objectService=o,this.provisioningConfig=this.windowRefService.nativeWindow.config,!this.provisioningConfig)throw Error("No provisioning configuration found!");if(!(null===(t=this.provisioningConfig.auth)||void 0===t?void 0:t.clientId)&&!(null===(r=this.provisioningConfig.base)||void 0===r?void 0:r.clientId))throw Error("auth.clientId is required in configuration!");var a,s=this.windowRefService.nativeWindow.location,p={api:{baseUrl:s.protocol+"//"+s.host+"/api"},auth:{clientId:"",allowedUrls:[s.protocol+"//"+s.host],baseUrl:s.protocol+"//"+s.host+"/auth/realms/",grant:"implicit",realm:"master",logoutRedirectUrls:[]},debug:!1,app:e};(null===(n=this.provisioningConfig)||void 0===n?void 0:n.base)&&(a={api:{baseUrl:"https://"+this.provisioningConfig.base.domain+"/api"},auth:{clientId:this.provisioningConfig.base.clientId,allowedUrls:["https://"+this.provisioningConfig.base.domain+"/api"],baseUrl:"https://"+this.provisioningConfig.base.domain+"/auth/realms/",grant:"implicit",realm:"master",logoutRedirectUrls:[]},app:e});var c=this.objectService.mergeDeep(p,a,this.provisioningConfig);c=Object.assign(Object.assign({},c),{api:Object.assign(Object.assign({},c.api),{baseUrl:this.getValidUrl(c.api.baseUrl)}),auth:Object.assign(Object.assign({},c.auth),{baseUrl:this.getValidUrl(c.auth.baseUrl)})}),this.config=c}return e.prototype.getValidUrl=function(e){return"/"!==(null==e?void 0:e.substr(-1))?e+"/":e},e}();n.decorators=[{type:o.Injectable}],n.ctorParameters=function(){return[{type:void 0,decorators:[{type:o.Inject,args:[r]}]},{type:t.WindowRefService},{type:t.ObjectService}]};var a=function(){function e(e,i){this.currencyPipe=e,this.configService=i}return e.prototype.transform=function(e){return this.currencyPipe.transform(e,this.configService.config.app.currencyCode)},e}();a.decorators=[{type:o.Pipe,args:[{name:"sofCurrencyConfig"}]}],a.ctorParameters=function(){return[{type:i.CurrencyPipe},{type:n}]};var s=function(){function e(e,i){this.datePipe=e,this.configService=i}return e.prototype.transform=function(e){return this.datePipe.transform(e,this.configService.config.app.dateFormat)},e}();s.decorators=[{type:o.Pipe,args:[{name:"sofDateConfig"}]}],s.ctorParameters=function(){return[{type:i.DatePipe},{type:n}]};var p=function(){function e(e,i){this.configService=e,this.datePipe=i}return e.prototype.transform=function(e){var i="1970-01-01 "+e;return this.datePipe.transform(i,this.configService.config.app.timeFormat)},e}();p.decorators=[{type:o.Pipe,args:[{name:"sofTimeConfig"}]}],p.ctorParameters=function(){return[{type:n},{type:i.DatePipe}]};var c=function(){function e(e,i){this.configService=e,this.datePipe=i}return e.prototype.transform=function(e){return this.datePipe.transform(e,this.configService.config.app.dateFormat+" "+this.configService.config.app.timeFormat)},e}();c.decorators=[{type:o.Pipe,args:[{name:"sofDateTimeConfig"}]}],c.ctorParameters=function(){return[{type:n},{type:i.DatePipe}]};var f=function(){function e(i,o,t){if(this.appConfig=o,i)throw new Error("AppConfigModule is already loaded. Import in your base AppModule only.");if(!o)throw Error(e.name+" should be imported using forRoot static method!");if(!t)throw new Error("You need to import the UtilServicesModule in your AppModule!")}return e.forRoot=function(i){return{ngModule:e,providers:[{provide:r,useValue:i}]}},e}();f.decorators=[{type:o.NgModule,args:[{imports:[i.CommonModule],providers:[n]}]}],f.ctorParameters=function(){return[{type:f,decorators:[{type:o.Optional},{type:o.SkipSelf}]},{type:void 0,decorators:[{type:o.Optional},{type:o.Inject,args:[r]}]},{type:t.WindowRefService,decorators:[{type:o.Optional}]}]};var u=function(){};u.decorators=[{type:o.NgModule,args:[{imports:[i.CommonModule],declarations:[a,s,p,c],exports:[a,s,p,c]}]}],e.APP_CONFIG_TOKEN=r,e.AppConfigModule=f,e.AppConfigUtilsModule=u,e.ConfigService=n,e.CurrencyConfigPipe=a,e.DateConfigPipe=s,e.DateTimeConfigPipe=c,e.TimeConfigPipe=p,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=sofico-framework-app-config.umd.min.js.map